<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.66.0" />
  
  
  
  <title>
    
    xkyle.com
    
  </title>
  <link rel="canonical" href="../../">
  
  <link rel="alternate" type="application/rss+xml" href="../../index.xml" title="xkyle.com">
  
  
  
  
  
  
  



































































  
  <link rel="stylesheet" href="../../css/base.min.50883c9e7cc6f561db1dcd2089b6b895c60df8d10b9e71a90cbc10e59c8bfc40.css" integrity="sha256-UIg8nnzG9WHbHc0giba4lcYN&#43;NELnnGpDLwQ5ZyL/EA=" crossorigin="anonymous">
  
  
</head>
<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="">xkyle.com</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="about/">About</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="post/">Posts</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="tags/">Tags</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="categories/">Categories</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="index.xml">RSS</a>
      </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        



<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Sutro-Tower-Vinyl-Art/" rel="bookmark">Sutro Tower Vinyl Art</a>
  </h2>
  
  <time datetime="2018-10-05T19:35:56Z">
    5 October, 2018
  </time>
  
</header>

  
  <p>I recently finished a project to make a vinyl mural of Sutro tower:</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>The &ldquo;source code&rdquo; of this project is on <a href="https://github.com/solarkennedy/sutro-tower-vinyl">github</a> and is in the public domain.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Cross-Country-Motorcycle-Road-Trip-2018/" rel="bookmark">Cross-Country Motorcycle Road Trip 2018</a>
  </h2>
  
  <time datetime="2018-06-18T07:48:18Z">
    18 June, 2018
  </time>
  
</header>

  
  <p>I have finished a month long road trip <a href="https://trips.furkot.com/ts/GnKQVl">totaling 8741 miles</a>:
<figure><a href="https://trips.furkot.com/ts/GnKQVl">
    <img src="../../uploads/2018-06-18-motorcycle-road-trip-2018/roadtrip%20map.png" width="100%"/> </a>
</figure>
</p>
<p>I rode a <a href="https://en.wikipedia.org/wiki/Kawasaki_Ninja_300">2014 Kawasaki Ninja 300</a></p>
<p><figure><a href="../../uploads/2018-06-18-motorcycle-road-trip-2018/IMG_20180608_173903.jpg">
    <img src="../../uploads/2018-06-18-motorcycle-road-trip-2018/IMG_20180608_173903.jpg" width="100%"/> </a>
</figure>

<figure><a href="../../uploads/2018-06-18-motorcycle-road-trip-2018/IMG_20180611_115633-EFFECTS.jpg">
    <img src="../../uploads/2018-06-18-motorcycle-road-trip-2018/IMG_20180611_115633-EFFECTS.jpg" width="100%"/> </a>
</figure>
</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../The-Evolution-of-Distributed-Systems-Management/" rel="bookmark">The Evolution of Distributed Systems Management</a>
  </h2>
  
  <time datetime="2018-02-23T07:48:18Z">
    23 February, 2018
  </time>
  
</header>

  
  <p>Let&rsquo;s survey the past and present of how we manage distributed systems, and
then maybe try to predict the future.</p>
<p>For this survey I&rsquo;ll look at a few open-source technologies to give concrete
examples (in <a href="https://en.wikipedia.org/wiki/Kardashev_scale">Kardashev style</a>.</p>
<ul>
<li><a href="#type-0-manually-deployed-and-configured">Type 0: Manually Deployed and Configured</a></li>
<li><a href="#type-1-host-centric-configuration-management">Type 1: Host-Centric Configuration Management</a></li>
<li><a href="#type-2a-infrastructure-scoped-orchestration-tooling">Type 2A: Infrastructure-scoped Orchestration Tooling</a></li>
<li><a href="#type-2b-application-specific-orchestration-tooling">Type 2B: Application-specific Orchestration Tooling</a></li>
<li><a href="#type-3-compute-platform-native-application-specific-frameworks">Type 3: Compute-Platform-Native Application-Specific Frameworks</a></li>
<li>
<ul>
<li><a href="#type-3a-mesos-frameworks">Type 3A: Mesos Frameworks</a></li>
</ul>
</li>
<li>
<ul>
<li><a href="#type-3b-kubernetes-k8s-operators">Type 3B: Kubernetes (k8s) Operators</a></li>
</ul>
</li>
<li><a href="#type-4-hybrid">Type 4: Hybrid?</a></li>
</ul>
<h2 id="type-0-manually-deployed-and-configured">Type 0: Manually Deployed and Configured</h2>
<figure>
    <img src="../../uploads/distributed-systems-management/mysql-manual.png"/> 
</figure>

<p>MySQL is a great example of a distributed system (when setup in Master/Slave
configuration) that is designed to be installed and configured by humans. The
configuration files are human-friendly ini-style. The runtime orchestration is
established via commands (statements) in the MySQL shell.</p>
<p>This doesn&rsquo;t mean that the software <em>can&rsquo;t</em> be automated. I&rsquo;ll discuss what
MySQL looks like when it is automated at different levels further down in the
blog post. I might call the &ldquo;scripting&rdquo; of MySQL orchestration &ldquo;Type 0.5&rdquo;-style
orchestration. There are a
<a href="https://github.com/thomasvs/mysql-replication-start/blob/master/mysql-replication-start.sh">few</a>
<a href="http://blog.ditullio.fr/2016/04/30/initialize-mysql-master-slave-replication-script/">examples</a>
of what this looks like.</p>
<p>There isn&rsquo;t much to say about Type 0 automation. It is characterized by the
<strong>lack</strong> of built-in automation facilities and cumbersome/brittle
integrations with external automation systems.</p>
<p>Other systems that are designed to be manually deployed and configured by humans
(links to documentation representative of manual configuration):</p>
<ul>
<li>Classic network switches <a href="https://www.cisco.com/c/en/us/td/docs/ios/12_2/ip/configuration/guide/fipr_c/1cfrip.html#wp1001030">(Cisco IOS)</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-redis-replication-on-ubuntu-16-04">Classic Redis</a></li>
<li><a href="https://zookeeper.apache.org/doc/r3.1.2/zookeeperStarted.html">Zookeeper</a></li>
</ul>
<p>It starts getting interesting when engineers take these systems and build
orchestration tooling around them. I predict that we&rsquo;ll continue to see more
and more systems being build with automation in mind from the start, leading to
very different interface and configuration design decisions.</p>
<h2 id="type-1-host-centric-configuration-management">Type 1: Host-Centric Configuration Management</h2>
<figure>
    <img src="../../uploads/distributed-systems-management/type1.png"/> 
</figure>

<p>I characterize &ldquo;Type 1&rdquo; distributed systems management as an
application-agnostic system that is &ldquo;host-centric.&rdquo; These tools can &ldquo;configure
anything&rdquo; and runs &ldquo;on a host&rdquo;. One might call these &ldquo;classic configuration
management tools.&rdquo; Tools like:</p>
<ul>
<li>Puppet</li>
<li>Chef</li>
<li>Ansible</li>
<li>Salt</li>
</ul>
<p>These tools do have the flexibility to be extended to support different
applications, but lack the ability to orchestrate an action &ldquo;across a cluster&rdquo;
in a good way. Here are some examples of this:</p>
<ul>
<li><a href="http://txt.fliglio.com/2015/12/mysql-replication-with-puppet/">Using Puppet to setup MySQL replication &ldquo;mostly&rdquo;</a></li>
<li><a href="http://docs.ansible.com/ansible/latest/redis_module.html">Ansible native Redis configuration using static master/slave ip addresses</a></li>
<li><a href="https://github.com/rapid7/chef-etcd#using-the-aws-discovery-method">Etcd Chef Cookbook that runs on hosts, but must use external state (etcd/dns/ec2 tags) to coordinate the bootstrap process</a></li>
<li><a href="https://forge.puppet.com/autostructure/kubernetes/tasks#task_kubeadm_join">Kubernetes module that uses &lsquo;puppet tasks&rsquo; to do adhoc orchistration</a></li>
</ul>
<p>These types of tools are very mature now, but they still operate at the &ldquo;host&rdquo;
level and don&rsquo;t really have the capability to do &ldquo;cluster-wide&rdquo; operations like
&ldquo;promote a new mysql master&rdquo; or &ldquo;replace a cassandra node&rdquo;. They mostly assume
that the host in question already exists, and leave the provisioning and
de-provisioning of servers up to another tool (knife, etc).</p>
<p>I predict that Type 1 tools will continue to lose relevance in a world where
Type 3 tools exist, and as the industry as a whole learns to look beyond &ldquo;the
single node&rdquo;.</p>
<h2 id="type-2a-infrastructure-scoped-orchestration-tooling">Type 2A: Infrastructure-scoped Orchestration Tooling</h2>
<figure>
    <img src="../../uploads/distributed-systems-management/type2a.png"/> 
</figure>

<p>Type 2A distributed system management tools can operate beyond a single node,
but are still general-purpose tools that have the capability to be extended to
support a variety of distributed systems. This usually involves some sort of
domain specific language (DSL).</p>
<p>Here are some examples:</p>
<ul>
<li><a href="https://www.terraform.io/">Hashicorp Terraform</a></li>
<li><a href="https://aws.amazon.com/cloudformation/">CloudFormation</a></li>
<li><a href="https://docs.openstack.org/heat/latest/">OpenStack Heat</a></li>
<li><a href="https://bosh.io/">Bosh</a></li>
<li><a href="https://docs.cloudify.co/4.2.0/intro/what-is-cloudify/">Cloudify</a></li>
<li><a href="http://www.sparkleformation.io/">SparkleFormation</a></li>
</ul>
<p>They key attribute to these tools is their tight integration with the
underlying infrastructure APIs. This makes them well suited for general purpose
infrastructure as well as deploying distributed systems.</p>
<p>Because they lack tight cohesion with the actual distributed systems they might
be deploying, really advanced distributed system orchestration is not really
possible. Here are some examples:</p>
<ul>
<li><a href="http://maxenglander.com/2015/06/09/etcd-clusters-with-terraform.html">Deploying Etcd clusters on Terraform</a> is straightforward, but scaling them is awkward</li>
<li><a href="https://github.com/mbabineau/cloudformation-zookeeper">A Zookeeper cluster deployed via Cloudformation</a> still requires another tool (Exhibitor) to manage Zookeeper itself</li>
<li><a href="https://forums.aws.amazon.com/thread.jspa?threadID=223736">There is no such thing as CloudFormation Modules</a> (not a very good example)</li>
</ul>
<p>A reader might be wondering why I would even expect such tools to have such
functionality. After all, these Type 2A tools are &ldquo;infrastructure oriented&rdquo;,
not &ldquo;distributed-systems oriented.&rdquo; But if Type 2A tools are not quite
sufficient for fully managing distributed systems for us, then what is?</p>
<h2 id="type-2b-application-specific-orchestration-tooling">Type 2B: Application-specific Orchestration Tooling</h2>
<figure>
    <img src="../../uploads/distributed-systems-management/type2b.png"/> 
</figure>

<p>Type 2B Tools are the counterparts of 2A. They are very &ldquo;application-aware&rdquo; and
are not general purpose infrastructure tools. They rarely have the ability to
launch raw infrastructure themselves, and often still require &ldquo;Type 1&rdquo; tools to
get them going.</p>
<p>Here are some examples:</p>
<ul>
<li>MySQL via Youtube&rsquo;s <a href="http://vitess.io/">Vitess</a></li>
<li>MySQL via Github&rsquo;s <a href="https://github.com/github/orchestrator">Orchestrator</a></li>
<li>CloudFoundary via Pivotal&rsquo;s <a href="https://github.com/cloudfoundry/cf-deployment">cf-deployment</a></li>
<li>Spinaker via <a href="https://github.com/spinnaker/halyard#halyard">Halyard</a></li>
<li>Cassandra via <a href="https://github.com/Netflix/Priam">Netflix&rsquo;s Priam</a></li>
<li>Cassandra (DataStax Enterprise) via <a href="https://docs.datastax.com/en/latest-opsc/index.html">DataStax OpsCenter</a></li>
<li>Redis via <a href="https://redis.io/topics/sentinel">Redis-Sentinel</a></li>
</ul>
<p>The nice thing about this class of tools is how &ldquo;smart&rdquo; they are about the
application they are managing. Sometimes they are even written by the same
entity that creates the distributed system it manages.</p>
<p>Some of them run continuously, supervising the distributed system in a tight
reconciliation loop. Contrast this to Type 2A tools, which do not operate like
this and usually run in a &ldquo;one-shot&rdquo; fashion.</p>
<p>I predict this class of tooling will remain relevant to orchestrate the current
generation of distributed systems in a platform-agnostic way, but eventually
will give way to Type 3 tools.</p>
<h2 id="type-3-compute-platform-native-application-specific-frameworks">Type 3: Compute-Platform-Native Application-Specific Frameworks</h2>
<figure>
    <img src="../../uploads/distributed-systems-management/type3.png"/> 
</figure>

<p>Type 3 tools are Application-specific, like 2B. But they sorta look like type
2A tools because they are empowered to launch and destroy actual
&ldquo;infrastructure&rdquo; (docker containers). This is because they are built upon a
different class of infrastructure abstraction that is currently being met in
the industry by a small subset of tools, namely Mesos and Kubernetes (k8s).</p>
<p>Another distinguishing feature of Type 3 tools is that they must <strong>run
continously</strong>. They must run continuously supervise the distributed-system
itself. The tool must be able to respond to changes in health state. They often
have ways of orchestrating changes across the cluster (like upgrades).</p>
<p>Unlike many other classes of tools, Type 3 tools are tightly coupled to either
Mesos <strong>or</strong> k8s. I have yet to see a &ldquo;platform-agnostic&rdquo; tool that can be a Mesos
framework <strong>and</strong> k8s operator (contrast to Type 2A tools that often have
multiple &ldquo;providers&rdquo; for deploying to different &ldquo;clouds&rdquo;).</p>
<p>I think this is likely the case for a few reasons:</p>
<ul>
<li>These types of tools are very new</li>
<li>While there is no &ldquo;native&rdquo; language for either Mesos or k8s, the large
production Mesos frameworks are Java/Scala and most k8s operators are in
golang.</li>
<li>The Mesos/k8s &ldquo;apis&rdquo; and primitives are very different, unlike the &ldquo;compute
instance&rdquo; primitives that AWS and GCE provide, making it difficult to build a
common tool.</li>
<li>In order to write a Mesos Framework or k8s operator, you need to be an expert
in Mesos/k8s <strong>and</strong> fully understand how to manage the distributed system
the framework/operator is trying to run. This is unlike Type 1 (config
management) tools, where you only need to know a little bit of puppet to
write a puppet module. The barrier to entry is higher.</li>
</ul>
<p>They are so different that I&rsquo;m going to split them up and talk about them
(Mesos/k8s) separately. Time will tell if there is room in the industry to have
Mesos and k8s <strong>and</strong> any more than that. I predict that the difficulty in
building high-quality Type 3 (Application-specific orchestrators) is so high
that we <strong>won&rsquo;t</strong> splinter into many community-provided modules like we&rsquo;ve seen in
Type 1 (classic configuration management) tools where everyone makes their own
&ldquo;Apache&rdquo; module.</p>
<h3 id="type-3a-mesos-frameworks">Type 3A: Mesos Frameworks</h3>
<p><a href="http://mesos.apache.org/documentation/latest/frameworks/">Mesos Frameworks</a>
are application-specific distributed-systems orchestration tools. While they
are &ldquo;easy to write in any language&rdquo;, they are hard to write <strong>well</strong>, and only a
few dozen open-source production-ready frameworks exist. Here is the
<a href="https://gist.github.com/solarkennedy/b60cb708c9ffbffe000530f4428bfa4a">list</a>
of those that are available on the
<a href="https://universe.dcos.io/#/packages">DC/OS Universe</a> (note: many of the packages
on the DC/OS Universe are standalone applications that run on Marathon and are
not Mesos Frameworks, and don&rsquo;t need to be).</p>
<p>DC/OS created by Mesosphere, is kinda like a &ldquo;Mesos Distribution&rdquo; which
includes Mesos, a fancy installer, a basic process runner (Marathon) and a
package manager, akin to a Linux distribution.</p>
<p>Mesos is sometimes described as &ldquo;a distributed systems kernel&rdquo;. I like this
description, although it is sometimes hard for new users to wrap their head
around it. It does give Mesos framework authors some of the lowest-level primitives
needed to write a distributed system. Things a framework can/must do are:</p>
<ul>
<li>Accept offers from Mesos and launch a task</li>
<li>Kill tasks</li>
<li>Respond to status updates from Mesos regarding existing tasks</li>
</ul>
<p>Additionally DC/OS gives frameworks additional facilities:</p>
<ul>
<li>Service discovery (via Mesos DNS)</li>
<li>Config state storage (via Zookeeper)</li>
<li>Secret management (via the DC/OS Secret API)</li>
<li>Framework process supervision (via Marathon)</li>
</ul>
<p>Only the Mesos users with large engineering organizations can devote effort
into developing custom Mesos frameworks. Here are some examples (none of which
are currently open source):</p>
<ul>
<li>Netflix&rsquo;s <a href="https://medium.com/netflix-techblog/the-evolution-of-container-usage-at-netflix-3abfc096781b">Titus</a></li>
<li>Uber&rsquo;s <a href="https://www.youtube.com/watch?v=Ktc3GjshHcc">Peleton</a></li>
<li>Apple&rsquo;s <a href="https://www.infoq.com/news/2015/05/mesos-powers-apple-siri">JARVIS</a></li>
<li>Yelp&rsquo;s <a href="https://engineeringblog.yelp.com/2017/04/how-yelp-runs-millions-of-tests-every-day.html">Seagull</a></li>
</ul>
<p>But most companies should not need to build their own bespoke Mesos
frameworks. Do most companies need Type 3 tools at all?</p>
<p>They do, because most companies <strong>do</strong> run <em>open-source</em> distributed systems,
but often lack the advanced automation to orchestrate them. The current status
quo is that only experts in those distributed systems handle the orchestration
of them. Without advanced orchestration, risky MySQL maneuvers are left up to a
DBA. Cassandra maintenance needs to be done &ldquo;very carefully&rdquo;. You basically
don&rsquo;t change a Zookeeper topology once it is up.</p>
<p>The space of Type 3A tools for open-source distributed-systems just starting.
Here are a few examples:</p>
<ul>
<li><a href="https://github.com/mesosphere/cassandra-mesos-deprecated">Cassandra on Mesos</a> (Deprecated)</li>
<li><a href="http://incubator.apache.org/projects/cotton.html">Apache Cotton (MySQL on Mesos</a> (Retied)</li>
<li><a href="https://github.com/mesos/kafka">Kafka on Mesos</a></li>
<li><a href="https://github.com/mesos/elasticsearch">Elasticsearch on Mesos</a></li>
</ul>
<p>But active development is mostly on the
<a href="https://github.com/mesosphere/dcos-commons/tree/master/frameworks">dcos-commons versions of these frameworks</a>.
Why? I think it is because of the difficulty of writing high-quality
production-ready Mesos frameworks. Mesosphere (the company behind DC/OS)
notices this, and has a financial incentive to build these high-quality
frameworks. Therefore, they build up a toolkit (the dcos-commons library) and
do it themselves.</p>
<p>I do think we are in the right space (Type 3) for these problems to be solved.
I (personally) think the abstractions that Mesos provides are quite enough to
build &ldquo;rich&rdquo; distributed systems. I also think that the Mesos
<a href="http://mesos.apache.org/documentation/latest/architecture/">Offer Model</a> is a bit
awkward to use (but that is maybe for another blog post).</p>
<p>My prediction is that Mesosphere will end up writing the majority of the
production-ready frameworks. I think this will lead to the authors of the
open-source distributed-systems to not &ldquo;Own&rdquo; the framework itself. I think
ideally the Kafka community (or Confluent) should build and maintain the
framework that manages Kafka. I think ideally the Cassandra community (or
Datastax) should build and maintain the Cassandra framework. I really do think
that these frameworks work best when they are built and designed by the same
authors of the distributed-system itself. I predict this situation will lead to
substandard user experience, which will push users to Type 3B&hellip;</p>
<h3 id="type-3b-kubernetes-k8s-operators">Type 3B: Kubernetes (k8s) Operators</h3>
<p>Kubernetes Operators are similar to Mesos Frameworks. They also run
continuously and are application-specific. They know how to handle upgrades or
recover from failures. They run in a tight reconciliation loop, always trying
to keep a system healthy.</p>
<p>Here are some examples:</p>
<ul>
<li><a href="https://coreos.com/blog/introducing-the-etcd-operator.html">Etcd Operator</a></li>
<li><a href="https://github.com/upmc-enterprises/elasticsearch-operator">Elasticsearch Operator</a></li>
<li><a href="http://info.crunchydata.com/blog/postgres-operator-for-kubernetes">Postgres Operator</a></li>
<li>There are a <a href="https://github.com/ramitsurana/awesome-kubernetes#operators">dozen or so notable ones</a></li>
</ul>
<p>There are far fewer k8s operators than Mesos frameworks today. I believe that is
the case today because Mesos has headstart of a few years, and k8s
<a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.9/#customresourcedefinition-v1beta1-apiextensions">Custom Resource Definitions</a>
(one of the better core primitives in k8s to create operators) is still in beta.
I think Custom Resource Definitions (CRDs) are going to be the best way that
users will interact with custom k8s operators.</p>
<p>What is the difference between a k8s operator and a Mesos framework? Let&rsquo;s
start with what k8s offers as a platform to operator-writers:</p>
<ul>
<li>You get your own custom namespaced REST endpoint in the k8s api (by applying
a yaml file, no rebuild of k8s required), hosted by the k8s api server itself</li>
<li>Users of operators treat custom objects just like any other object in k8s;
launching a new &ldquo;database&rdquo; has the same workflow as launching a &ldquo;pod&rdquo; (via
kubectl create)</li>
<li>Operators (using golang) get nice boilerplate
<a href="https://github.com/kubernetes/client-go">client code</a> to be able to sync and cache
etcd state and batch up calls to the k8s api (similar to Mesos&rsquo; task
reconciliation behavior)</li>
</ul>
<p>The surface area of what you have to write for a k8s operator is much smaller
than a Mesos framework. Additionally, users who use the k8s operator &ldquo;feel&rdquo;
like they are &ldquo;just interacting with k8s&rdquo;, because in a sense they are! The k8s
operator is just responding to etcd events and posting back to the k8s api in a
particular way. I think the model is better for both k8s operator writers and
users. Combine this with helm charts and I think you have a very good starting
point for building a powerful platform for managing and orchestrating
distributed systems.</p>
<p>I predict a few things will happen in the next 5 years:</p>
<ul>
<li>k8s will become the dominant infrastructure toolkit/framework/thingy</li>
<li>k8s operators, using CRDs, will be written, and eventually be &ldquo;first party&rdquo;
platforms for complex distributed systems (the same community that develops
the distributed system will also develop the k8s operator to go with it)</li>
<li>The k8s configuration &ldquo;language&rdquo; (via CRDs) will be a kind of lingua franca of the
infrastructure world</li>
</ul>
<h2 id="type-4-hybrid">Type 4: Hybrid?</h2>
<p>As an industry I think we are still in Type 3 automation land. I think the next
incremental improvement on this type of automation will look like a hybrid of
Type 3 (Mesos frameworks / k8s operators) and Type 2A (Terraform,
Cloudformation, etc).</p>
<p>Currently, Type 3 tooling is only able to use the compute resources given to
it, or maybe an external autoscaler can watch the cluster as a whole and scale
up and down. At the risk of separation-of-concerns-blasphemy, I think the next
level of distributed-systems automation will be able to launch and terminate
its <strong>own</strong> raw compute resources. I would like my
<a href="https://github.com/kubeflow/tf-operator">Tensorflow k8s operator</a>
to launch GPU instances if it needs to. I would like my
<a href="https://github.com/apache-spark-on-k8s/kubernetes-HDFS">HDFS operator</a> to launch its
own data nodes directly. I would like k8s itself to turn off nodes that it doesn&rsquo;t need.</p>
<p>Past that, I don&rsquo;t have an imagination good enough to imagine what might be beyond.</p>
<p><a href="mailto:kyle@xkyle.com">Email me</a> or make a
<a href="https://github.com/solarkennedy/xkyle.com">pull request</a> if you have comments or corrections.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Adding-Electric-Motors-to-a-Gemini-105m/" rel="bookmark">Adding Electric Motors to a Gemini 105m</a>
  </h2>
  
  <time datetime="2018-02-10T14:27:46Z">
    10 February, 2018
  </time>
  
</header>

  
  <p>I recently added a pair of electric motors to my Gemini 105m catamaran.</p>
<figure>
    <img src="../../uploads/gemini_motors/IMG_20171113_132548.jpg"/> <figcaption>
            <h4>Haul out</h4>
        </figcaption>
</figure>

<p>Although I don&rsquo;t have any photos of the actual installation, here is what they look like:</p>
<p><figure>
    <img src="../../uploads/gemini_motors/IMG_20171118_104642.jpg"/> <figcaption>
            <h4>motors</h4>
        </figcaption>
</figure>

<figure>
    <img src="../../uploads/gemini_motors/IMG_20180210_111009.jpg"/> <figcaption>
            <h4>wake</h4>
        </figcaption>
</figure>
</p>
<p>These are a pair of <a href="https://www.amazon.com/Caroute-S400-48V-Electric-controller-Saltwater/dp/B01FXDNXF2/ref=as_li_ss_tl?ie=UTF8&amp;linkCode=ll1&amp;tag=&amp;linkId=5dab3bd757917b2e68c878ccf6256df6">Caroutte S400&rsquo;s</a>.</p>
<p>In theory they have a thrust of 180lbs each and a peak power consumption of
2.7kw each. Although it cannot be directly compared, the onboard diesel is a
20kw (27 Horsepower) engine. With both engine there are many different
variables like transmission losses, propeller losses, etc. You just can&rsquo;t
compare these directly with specs alone. The pair of electric motors cost about
$3k.</p>
<p>How well do they actually perform? I would rate it as OK considering what they
are. With a 10 ton sail boat, I did not expect these motors to push this thing
more than a couple of knots. Honestly if they were powerful enough to maneuver
out of the marina and into the bay, I would be happy.</p>
<p>Here are two videos of them in action:</p>
<p>{% youtube XHEj2dpfv4w %}
{% youtube 4atrG6PSb0o %}</p>
<p>Unfortunately they are mounted too high, and will suck in air if I attempt to
run them at full throttle. I&rsquo;ll try to figure out how I can get them to go
lower into the water.</p>
<p>While they can be controlled &ldquo;tank style&rdquo;, I found that the actual
maneuverability of the two electric motors is worse compared to the vectored
thrust of the drive leg of the diesel.</p>
<p>The power from the system comes from two large <a href="https://www.wholesalesolar.com/1941905/panasonic/solar-panels/panasonic-330-watt-module-96-cell-hit-black-solar-panel">330 watt solar panels</a>.</p>
<figure>
    <img src="../../uploads/gemini_motors/IMG_20180210_125713.jpg"/> <figcaption>
            <h4>Two 330 Watt solar panels</h4>
        </figcaption>
</figure>

<p>Which run through a large 60 amp, 48 volt <a href="https://www.amazon.com/gp/product/B01DCU4M0S/ref=as_li_ss_tl?ie=UTF8&amp;psc=1&amp;linkCode=ll1&amp;tag=kyleanderson-20&amp;linkId=453ab4024fcf0692ffe75bd22af4e207">charge controller</a>.</p>
<figure>
    <img src="../../uploads/gemini_motors/IMG_20180210_122236.jpg"/> <figcaption>
            <h4>Solar charge controller</h4>
        </figcaption>
</figure>

<p>Which charge four 75amphour deep cycle batteries:</p>
<p><figure>
    <img src="../../uploads/gemini_motors/IMG_20180210_122553.jpg"/> <figcaption>
            <h4>batteries</h4>
        </figcaption>
</figure>

<figure>
    <img src="../../uploads/gemini_motors/IMG_20180210_123143.jpg"/> <figcaption>
            <h4>batteries</h4>
        </figcaption>
</figure>
</p>
<p>The batteries are certainly the weakest part of the system, but they were on hand (came with the boat). The batteries were half discharged after an hour of 3 knot motoring. In summary:</p>
<ul>
<li>The pair of electric motors is powerful and inexpensive considering the alternatives</li>
<li>The pair of solar panels is as large as I think it can be for this boat</li>
<li>The charge controller is overkill, but high quality</li>
<li>The batteries are under-sized for this system</li>
<li>~3 knots is pretty good for sun-powered propulsion</li>
</ul>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Another-Comparison-of-Image-to-ASCII-Conversion-Tools-2017/" rel="bookmark">Another Comparison of Image to ASCII Conversion Tools (2017)</a>
  </h2>
  
  <time datetime="2017-11-25T19:35:56Z">
    25 November, 2017
  </time>
  
</header>

  
  <p>Time for another round of terminal-based ascii/ansi art image conversion
tools. Check out my <a href="./a-comparison-of-image-to-ascii-conversion-tools/">last post from 2015</a>
with more comparisons of more tools.</p>
<p>This year I compare the best tool from 2015, img2xterm, against
a new set of tools that I&rsquo;ve stumbled across. <a href="mailto:kyle@xkyle.com">email me</a>
with other tools if you would like to be included in the <em>next</em> round.</p>
<h2 id="methodology">Methodology</h2>
<p>For these tests I used an image with a 160px width, twice that of
a standard terminal. Then I <code>cat</code>'d the image in plain xterm and
took a screenshot of the results.</p>
<p>The original has been scaled up (6X) to be the same relative size as
the resulting screenshots.</p>
<p>My entire methodology is on <a href="https://github.com/solarkennedy/ascii-art-converter-comparison">github</a>
if you wish to see exactly how I made these images. In theory
it is 100% reproducible from <code>make</code>. (assuming on a linux desktop)</p>
<h2 id="tools-compared">Tools Compared</h2>
<ul>
<li><a href="https://github.com/rossy/img2xterm">img2xterm</a></li>
<li><a href="https://github.com/jD91mZM2/termplay">termplay</a></li>
<li><a href="https://github.com/stefanhaustein/TerminalImageViewer">TerminalImageViewer</a></li>
<li><a href="https://github.com/eliukblau/pixterm">pixterm</a></li>
<li><a href="https://github.com/hzeller/timg">timg</a></li>
</ul>
<h2 id="results">Results</h2>
<h2 id="benderpng">bender.png</h2>
<p><img src="../../uploads/bender.original.png" alt="bender.png converted using original" title="bender.png converted using original">
<img src="../../uploads/bender.img2xterm.png" alt="bender.png converted using img2xterm" title="bender.png converted using img2xterm">
<img src="../../uploads/bender.termplay.png" alt="bender.png converted using termplay" title="bender.png converted using termplay">
<img src="../../uploads/bender.TerminalImageViewer.png" alt="bender.png converted using TerminalImageViewer" title="bender.png converted using TerminalImageViewer">
<img src="../../uploads/bender.pixterm.png" alt="bender.png converted using pixterm" title="bender.png converted using pixterm">
<img src="../../uploads/bender.timg.png" alt="bender.png converted using timg" title="bender.png converted using timg"></p>
<h2 id="lennapng">lenna.png</h2>
<p><img src="../../uploads/lenna.original.png" alt="lenna.png converted using original" title="lenna.png converted using original">
<img src="../../uploads/lenna.img2xterm.png" alt="lenna.png converted using img2xterm" title="lenna.png converted using img2xterm">
<img src="../../uploads/lenna.termplay.png" alt="lenna.png converted using termplay" title="lenna.png converted using termplay">
<img src="../../uploads/lenna.TerminalImageViewer.png" alt="lenna.png converted using TerminalImageViewer" title="lenna.png converted using TerminalImageViewer">
<img src="../../uploads/lenna.pixterm.png" alt="lenna.png converted using pixterm" title="lenna.png converted using pixterm">
<img src="../../uploads/lenna.timg.png" alt="lenna.png converted using timg" title="lenna.png converted using timg"></p>
<h2 id="nyanpng">nyan.png</h2>
<p><img src="../../uploads/nyan.original.png" alt="nyan.png converted using original" title="nyan.png converted using original">
<img src="../../uploads/nyan.img2xterm.png" alt="nyan.png converted using img2xterm" title="nyan.png converted using img2xterm">
<img src="../../uploads/nyan.termplay.png" alt="nyan.png converted using termplay" title="nyan.png converted using termplay">
<img src="../../uploads/nyan.TerminalImageViewer.png" alt="nyan.png converted using TerminalImageViewer" title="nyan.png converted using TerminalImageViewer">
<img src="../../uploads/nyan.pixterm.png" alt="nyan.png converted using pixterm" title="nyan.png converted using pixterm">
<img src="../../uploads/nyan.timg.png" alt="nyan.png converted using timg" title="nyan.png converted using timg"></p>
<h2 id="conclusion">Conclusion</h2>
<p><a href="https://github.com/rossy/img2xterm">img2xterm</a> is the contender from the last
comparison. Compared to this second wave of tools, its lack of 24bit color
shows. It does have the most advanced colorspace conversion capabilities.
If you want true-color, look elsewhere.</p>
<p><a href="https://github.com/jD91mZM2/termplay">termplay</a> is a converter written in
Rust, capable of converting static images as well as videos. It has native
youtube-dl support. It also has a unique feature to mirror an X11 window in
real time in the terminal. This converter had the highest performance of all
the tools. It probably has extra performance optimizations in order to support
video. The lack of half-block character support show when put side-by-side with
other converters.</p>
<p><a href="https://github.com/stefanhaustein/TerminalImageViewer">TerminalImageViewer</a> (tiv)
has the unique feature of being able to use many different block formats, more
than the half-block character, to create an interesting output. Look at the
list of <a href="https://github.com/stefanhaustein/TerminalImageViewer/blob/65ebc0a59e58ba5ba2f3d4dc54ced5e468317277/src/main/java/TerminalImageViewer.java#L248-L345">unique unicode characters</a>
available for use. Due to this feature, I had to provide an <strong>upscaled</strong>
version of the source images in order to produce the the desired output.</p>
<p><a href="https://github.com/eliukblau/pixterm">pixterm</a>&lsquo;s most prominent feature is its
speed. Taking advantage of Go&rsquo;s concurrency features, it can convert images
quickly using all available cores. It can also support a wide range of input
formats.</p>
<p><a href="https://github.com/hzeller/timg">timg</a>&lsquo;s unique feature is that it can show
animated gifs directly in the terminal. It can handle true color using the
half-block character for double the vertical resolution.</p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Color</th>
<th>Block Type</th>
<th>Language</th>
<th>Performance Overall, data</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>img2xterm</td>
<td>256</td>
<td>Half-Block</td>
<td>C</td>
<td>Medium (20, 13, 11)</td>
<td>Bash version available</td>
</tr>
<tr>
<td>termplay</td>
<td>True or 256</td>
<td>Single Block</td>
<td>Rust</td>
<td>High (6, 5, 4)</td>
<td>Video support</td>
</tr>
<tr>
<td>TerminalImageViewer</td>
<td>True or 256</td>
<td>4x8 Unicode</td>
<td>C++ and Java</td>
<td>Low (48, 46, 45)</td>
<td>Extra unicode characters for multi-pixel matching</td>
</tr>
<tr>
<td>pixterm</td>
<td>True</td>
<td>Half-Block</td>
<td>Go</td>
<td>Medium (17, 17, 17)</td>
<td>multi-core processing</td>
</tr>
<tr>
<td>timg</td>
<td>True</td>
<td>Half-Block</td>
<td>C++</td>
<td>High (10, 8, 7)</td>
<td>Animated gif support</td>
</tr>
</tbody>
</table>
<p>(Performance data is real time in ms for rendering bender, lenna, and nyan)</p>
<h3 id="winner-terminalimageviewer">Winner: TerminalImageViewer</h3>
<p>Even though it has relativly slow performance, its unique unicode rendering can
give the highest &ldquo;resolution&rdquo; images available on a terminal. It does look a
little weird on some images, so I&rsquo;m glad it has the -0 option to force it back
into half-block mode. In this mode it is just as good as pixterm or timg.</p>
<h3 id="runner-up-timg">Runner up: timg</h3>
<p>With true color and half-block support, timg creates very high quality versions
of images in terminials. Combine this with its high performance and animated
gif support, it is this year&rsquo;s runner up.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Cruising-from-Port-San-Luis-to-San-Francisco-in-a-Gemini-105m/" rel="bookmark">Cruising from Port San Luis to San Francisco in a Gemini 105m</a>
  </h2>
  
  <time datetime="2017-07-09T18:55:14Z">
    9 July, 2017
  </time>
  
</header>

  
  <p>Over the last 5 days my wife and I cruised from <a href="https://en.wikipedia.org/wiki/Avila_Beach,_California">Port San Luis</a> to San Francisco.
The total distance was 228 Nautical Miles (nm). We recently purchased the boat
and decided to relocate it to a Marina closer to where we live. We knew the
trip would relatively difficult. The majority of the journey would be against
the wind and waves. For this reason we decided to motor the entire distance
up North.</p>
<p>Due to technical difficulties, the first ~12 hours of the trip are missing from the GPS track.</p>
<!-- raw HTML omitted -->
<h2 id="day-1-2017-07-05">Day 1 (2017-07-05)</h2>
<p>On the first day we took <a href="http://www.bart.gov/">Bart</a> to
<a href="http://www.caltrain.com/">Caltrain</a> to
<a href="https://www.amtrak.com/coast-starlight-train">Amtrack</a> from San Francisco to
Avila Beach. From there we took the Water Taxi to the boat which was moored on a mooring ball. I made the call for us to leave that night, with me taking the night-shift.</p>
<!-- raw HTML omitted -->
<h4 id="5pm-leave-port-san-luis">5pm: Leave Port San Luis</h4>
<p>Off this part of the coast during this time the winds were against us at 16kts
gusting to 21kts.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>The seas overnight were not too rough, but the combination of the pounding and the headwind meant we could only sustain 4kts.</p>
<p>The Gemini pounds the seas pretty badly. This is mostly due to a combination of a solid (not netted) forward deck, a relatively low bridge deck clearance, and the structural nature of a catamaran. Cody got very seasick.</p>
<h2 id="day-2-2017-07-06">Day 2 (2017-07-06)</h2>
<h4 id="2am-a-late-night-conversation">2am: A late night conversation</h4>
<p>At ~2am I was hailed by a 300ft research vessel heading North towards Portland.
He was showing up on my radar and just called to let me know he was passing on
the port side and should continue on our respective courses. It was nice to
hear from someone in the middle of the night. I had a conversation with him,
and his general advice to avoid the rough seas was to generally hug the coast.
He mentioned the waves don&rsquo;t get too bad until Point Sur.</p>
<h4 id="7am-cody-takes-over">7am: Cody takes over</h4>
<!-- raw HTML omitted -->
<h2 id="9am-a-snagged-prop">9am: A snagged prop</h2>
<p>In the morning we had a prop fouling by a line that
had been pounded out of it&rsquo;s holding bag on the forward part of the deck. It
had found its way under the hull and was just long enough to get the tip of the
line fouled in the prop.</p>
<p>The Gemini has a raisable drive leg made by <a href="http://www.sillette.co.uk/sonic_type_2_catamaran_drive.html">Sillette</a>:</p>
<!-- raw HTML omitted -->
<p>The drive leg adds complexity to the rig, but does make fixing fouled props
easy. The difficulty here was actually figuring out it was fouled in the first
place. Every time I would raise the leg to inspect it, there was nothing in it.
The line was <em>only</em> long enough to get in the prop while down and at speed (so
the suction would draw in the line). I had to watch the water carefully and
wait for the line to find its way into the prop to confirm my suspicion about
the cause of the extreme vibration.</p>
<!-- raw HTML omitted -->
<h4 id="3-5pm-point-sur">3-5pm: Point Sur</h4>
<p>By the time we hit <a href="https://www.google.com/maps/place/Point+Sur+Lighthouse,+Monterey,+CA+93940/@36.2401963,-121.920675,8197a,35y,38.12t/data=!3m1!1e3!4m5!3m4!1s0x808d9154d4894371:0x4141b8589a0a31f9!8m2!3d36.3063643!4d-121.9016398">Point Sur</a> there was a small craft advisory in effct. There were very strong headwinds and 10ft seas.</p>
<p>This was the most difficult part of the trip. Usually the buoyancy of the
Gemini allows it to &ldquo;only&rdquo; pound waves and ride over swells. This was the only
part of the trip where the waves were so bad that the boat would pound and dig
deep into the wave, with seawater crashing over the top. Unsurprisingly the
autohelm was not able to keep us on course and I took over the wheel. I drove the engine hard and pressed
forward for a few hours to get us past this difficult point. I was only able to maintain 2-3kts.</p>
<p>At around 6pm the weather subsided enough to allow me to throttle back the
engine and re-enable autopilot, giving me and the engine a break while we
continued to travel up the coast, with our intermediate destination of
anchoring at Whalers Cove for the night.</p>
<h2 id="day-3-2017-07-07">Day 3 (2017-07-07)</h2>
<h4 id="12am-give-up-on-whalers-cove">12am: Give up on Whalers Cove</h4>
<p><a href="https://www.google.com/maps/place/Whaler's+Cove/@36.5200501,-121.9398069,800m/data=!3m1!1e3!4m5!3m4!1s0x808de897a571f393:0x3b610ae25ef6d6cd!8m2!3d36.5199815!4d-121.9388353">Whaler&rsquo;s Cove</a> is a small little cove for boats to anchor in, &ldquo;protected&rdquo; by surrounding rocks. It is only a few hundred feet across, with an opening of about 200 feet.</p>
<p>With the slow progress we made thus far, we arrived here at around midnight in
the darkness. The cove was indistinguishable from the surrounding rocks
and black land. With very little anchoring experience and a dead spotlight, there was
just no way were going to able to make this landing, especially given our fatigue.</p>
<p>Luckily Cody volunteered to drive three more hours north to Monterey Bay Harbor.</p>
<h4 id="3am-arrive-at-monterey-harbor">3am: Arrive at Monterey Harbor</h4>
<p>After a small nap, I had enough brainpower to remember that I had the foresight
to load <a href="https://opencpn.org/">OpenCPN</a> with the appropriate vector maps for
this area on my cell phone. This was an amazingly powerful tool for guiding
into a Marina at night. A detailed map with a real-time GPS overlay gives you
the confidence that you are actually in the right direction and looking at the
right lights. Luckily the friendly Harbormaster on the night shift gave us an
end-tie and a good nights sleep.</p>
<h4 id="9am-depart-monterey-harbor">9am: Depart Monterey Harbor</h4>
<p><a href="http://monterey.org/Services/Harbor-and-Marina">Monterey Harbor</a> is a small city harbor. Nothing really notable, the service was nice, bathrooms were clean, fairly priced.</p>
<!-- raw HTML omitted -->
<p>For this day we decided to make an easy trip of only 22nm north to Santa Cruz.</p>
<!-- raw HTML omitted -->
<h4 id="5pm-arrive-at-santa-cruz">5pm: Arrive at Santa Cruz</h4>
<p><a href="https://www.yelp.com/biz/santa-cruz-harbor-boatyard-santa-cruz">Santa Cruz</a> is a nice harbor, but for a transient berth we paid ~$50, which is twice as expensive compared to the other marinas we stayed at. On top of that, shower access required a non-refundable &ldquo;deposit&rdquo; and access to shore power was extra, no thanks. Since we had a short day, we treated ourselves to <a href="https://www.yelp.com/biz/betty-burgers-santa-cruz">Betty&rsquo;s Burgers</a> for dinner.</p>
<h2 id="day-4-2017-07-08">Day 4 (2017-07-08)</h2>
<h4 id="6am-depart-santa-cruz">6am: Depart Santa Cruz</h4>
<!-- raw HTML omitted -->
<p>I say calm, but it still is the Pacific ocean. Calm in this context means no water is spraying in your face:
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h4 id="5pm-arrive-at-pillar-point">5pm: Arrive at Pillar Point</h4>
<!-- raw HTML omitted -->
<p><a href="https://www.yelp.com/biz/pillar-point-harbor-half-moon-bay">Pillar Point Marina</a> is primary a fishing harbor, but has lots of shops and restaurants nearby. It is a surprisingly happening place.</p>
<h2 id="day-5-2017-07-09">Day 5 (2017-07-09)</h2>
<h4 id="6am-depart-pillar-point-marina">6am: Depart Pillar Point Marina</h4>
<!-- raw HTML omitted -->
<p>Departing Pillar Point was relatively easy in the early morning, especially assisted with Radar. We were accompanied by many fishing boats out to get their catch. A kayaker warned us of a pair of Humpbacks just outside the harbor barrier wall, and indeed I had to make evasive maneuvers to avoid a whale surfacing ~30ft in front of the boat!</p>
<h4 id="9am-drive-leg-leak">9am: Drive leg leak</h4>
<p>This morning the drive train of the boat sounded a lot more &ldquo;whiny&rdquo; than normal. The worrying sound was coming from the drive leg, and <em>not</em> the diesel engine. Luckily I had been lurking on the <a href="https://beta.groups.yahoo.com/neo/groups/Gemini_Cats/info">Gemini Owners Mailing List</a> to have a hunch that there might have been an oil leak, and that the &ldquo;billows&rdquo; was the most likely culprit:</p>
<!-- raw HTML omitted -->
<p>The billows is a rubber part that gets a lot of exercise as the drive leg turns, raises, and lowers. This leak allowed enough oil to drain to expose the top CV joint, leaving it less lubricated and whiny. After a quick phone call to the previous owner to confirm the correct oil was onboard and available (thanks so much Jerry! This was a huge lifesaver!), I topped up the drive oil to get us the rest of the way home. This billows will be first on my list of repairs to make on the boat.</p>
<h4 id="11am-entering-san-francisco-bay">11am: Entering San Francisco Bay</h4>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>We timed it correctly to allow us to come in with the tide, giving as a nice 3kt speed boost giving us a peak speed of 9.3kts under the bridge.</p>
<h4 id="1pm-arrive-at-oyster-point-marina">1pm: Arrive at Oyster Point Marina</h4>
<p>And finally we arrived at our actual destination: <a href="https://www.yelp.com/biz/oyster-point-marina-south-san-francisco">Oyster Point Marina</a></p>
<!-- raw HTML omitted -->

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/sailing/" rel="tag">sailing</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/Personal/" rel="tag">personal</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Home-Made-Lichtenberg-Figures/" rel="bookmark">Home Made Lichtenberg Figures</a>
  </h2>
  
  <time datetime="2017-01-01T17:39:13Z">
    1 January, 2017
  </time>
  
</header>

  
  <p>For winter 2016 I made
<a href="https://en.wikipedia.org/wiki/Lichtenberg_figure">Lichenberg Figures</a>.
I used a 5kV 10mA (50W) neon light transformer. I also experimented with
a 2kW microwave oven transformer, but found that the lower powered neon
transformer produced finer, better, and safer results.</p>
<p>To produce the figures, I would first apply the electricity to the wood, often
at the corners. Initially the resistance of the wood is not sufficient to allow
any burning. Then I would use a spray bottle full of water/baking soda to
moisten the surface of the wood until the electricity could find the path of
least resistance and start the burning reaction. With the low-power neon
transformer the burning is slow and takes hours.</p>
<p>To guide the reaction in an &ldquo;aesthetically pleasing way&rdquo;, I used a heat gun to
temporarily dry out parts of the wood, creating channels of low-resistance
surface water. This technique is most evident on piece <a href="#10">#10</a>. It was also
used on <a href="#15">#15</a> to evenly cover the entire (large) piece.</p>
<p>After the electrical treatment, each piece was finished with varnish, matted,
framed, and shipped. Below is a gallery of final results. Each was given to a
friend or family member as a winter gift:</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../A-Comparison-of-Text-Based-Web-Browsers/" rel="bookmark">A Comparison of Text-Based Web Browsers</a>
  </h2>
  
  <time datetime="2016-05-22T12:04:09Z">
    22 May, 2016
  </time>
  
</header>

  
  <h2 id="intro">Intro</h2>
<p>Who browses on the terminal now-a-days? However you are, you are crazy,
but you might appreciate this comparison of text-based web browsers,
with screenshots of a few different popular sites.</p>
<p>I wanted to test these browsers with more than just simple pages, so where
possible I actually logged into places and took screenshots of
the actual webpage in a realistic state.</p>
<h2 id="methodology">Methodology</h2>
<p>All browsers were set to use xterm with <code>TERM=xterm-256color</code>.
The following browsers were used with these settings:</p>
<ul>
<li>retawq (0.2.6c)
<ul>
<li>Enable SSL support</li>
</ul>
</li>
<li>elinks (0.12~pre6-11build2)
<ul>
<li>underline</li>
<li>linux frames</li>
<li>256 color</li>
<li>utf8</li>
</ul>
</li>
<li>links2 (2.12-1)
<ul>
<li>Linux frames</li>
<li>Color</li>
</ul>
</li>
<li>w3m (0.5.3-26build1)
<ul>
<li>Render frames</li>
</ul>
</li>
<li>lynx (2.8.9dev8-4ubuntu1)
<ul>
<li>underline links</li>
<li>Always allow cookies</li>
</ul>
</li>
</ul>
<p>Check out the <a href="https://github.com/solarkennedy/text-based-web-browser-comparison">code</a>
for the exact commands used to generate everything.</p>
<h2 id="comparison">Comparison</h2>
<h3 id="wikipedia-rule_110httpsenwikipediaorgwikirule_110"><a href="https://en.wikipedia.org/wiki/Rule_110">Wikipedia Rule_110</a></h3>
<p>Wikipedia has great text-based browsing support in general. I did not try editing anything.
All browsers had no trouble rendering the data in a readable way.</p>
<p>![https://en.wikipedia.org/wiki/Rule_110 rendered using retawq](/uploads/en.wikipedia.org retawq.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using retawq&rsquo;)
![https://en.wikipedia.org/wiki/Rule_110 rendered using elinks](/uploads/en.wikipedia.org elinks.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using elinks&rsquo;)
![https://en.wikipedia.org/wiki/Rule_110 rendered using links2](/uploads/en.wikipedia.org links2.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using links2&rsquo;)
![https://en.wikipedia.org/wiki/Rule_110 rendered using w3m](/uploads/en.wikipedia.org w3m.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using w3m&rsquo;)
![https://en.wikipedia.org/wiki/Rule_110 rendered using lynx](/uploads/en.wikipedia.org lynx.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using lynx&rsquo;)
![https://en.wikipedia.org/wiki/Rule_110 rendered using Original (surf)](/uploads/en.wikipedia.org original.png &lsquo;<a href="https://en.wikipedia.org/wiki/Rule">https://en.wikipedia.org/wiki/Rule</a>_110 rendered using Original (surf)')</p>
<h3 id="hacker-newshttpnewsycombinatorcom"><a href="http://news.ycombinator.com">Hacker News</a></h3>
<p>Hacker News is mostly text-based, so these browsers had no trouble with it in general.
I appreciate elinks&rsquo;s support for colors that are true to the original.</p>
<p>![http://news.ycombinator.com rendered using retawq](/uploads/news.ycombinator.com retawq.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using retawq&rsquo;)
![http://news.ycombinator.com rendered using elinks](/uploads/news.ycombinator.com elinks.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using elinks&rsquo;)
![http://news.ycombinator.com rendered using links2](/uploads/news.ycombinator.com links2.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using links2&rsquo;)
![http://news.ycombinator.com rendered using w3m](/uploads/news.ycombinator.com w3m.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using w3m&rsquo;)
![http://news.ycombinator.com rendered using lynx](/uploads/news.ycombinator.com lynx.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using lynx&rsquo;)
![http://news.ycombinator.com rendered using Original (surf)](/uploads/news.ycombinator.com original.png &lsquo;<a href="http://news.ycombinator.com">http://news.ycombinator.com</a> rendered using Original (surf)')</p>
<h3 id="facebookhttpsfacebookcom"><a href="https://facebook.com">Facebook</a></h3>
<p>I could not actually log into facebook with any text-based browser.</p>
<p>![https://facebook.com rendered using retawq](/uploads/facebook.com retawq.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using retawq&rsquo;)
![https://facebook.com rendered using elinks](/uploads/facebook.com elinks.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using elinks&rsquo;)
![https://facebook.com rendered using links2](/uploads/facebook.com links2.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using links2&rsquo;)
![https://facebook.com rendered using w3m](/uploads/facebook.com w3m.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using w3m&rsquo;)
![https://facebook.com rendered using lynx](/uploads/facebook.com lynx.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using lynx&rsquo;)
![https://facebook.com rendered using Original (surf)](/uploads/facebook.com original.png &lsquo;<a href="https://facebook.com">https://facebook.com</a> rendered using Original (surf)')</p>
<h3 id="twitterhttpstwittercom"><a href="https://twitter.com">Twitter</a></h3>
<p>Twitter looks &ldquo;ok&rdquo; on text-based browsers, although for that particular
application you might want to consider a <a href="http://www.rainbowstream.org/">dedicated application</a>
built for the terminal.</p>
<p>retawq was unable to log in for some reason.</p>
<p>![https://twitter.com rendered using retawq](/uploads/twitter.com retawq.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using retawq&rsquo;)
![https://twitter.com rendered using elinks](/uploads/twitter.com elinks.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using elinks&rsquo;)
![https://twitter.com rendered using links2](/uploads/twitter.com links2.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using links2&rsquo;)
![https://twitter.com rendered using w3m](/uploads/twitter.com w3m.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using w3m&rsquo;)
![https://twitter.com rendered using lynx](/uploads/twitter.com lynx.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using lynx&rsquo;)
![https://twitter.com rendered using Original (surf)](/uploads/twitter.com original.png &lsquo;<a href="https://twitter.com">https://twitter.com</a> rendered using Original (surf)')</p>
<h3 id="gmailhttpsmailgooglecom"><a href="https://mail.google.com">Gmail</a></h3>
<p>Gmail is a tall order for a text based browser. Only elinks, w3m, and lynx could pull it off.</p>
<p>elinks shines again with great CSS support, with w3m with second place. These were all rendered
using the basic HTML version. Luckily I didn&rsquo;t get a CAPTCHA?</p>
<p>![https://mail.google.com rendered using retawq](/uploads/mail.google.com retawq.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using retawq&rsquo;)
![https://mail.google.com rendered using elinks](/uploads/mail.google.com elinks.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using elinks&rsquo;)
![https://mail.google.com rendered using links2](/uploads/mail.google.com links2.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using links2&rsquo;)
![https://mail.google.com rendered using w3m](/uploads/mail.google.com w3m.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using w3m&rsquo;)
![https://mail.google.com rendered using lynx](/uploads/mail.google.com lynx.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using lynx&rsquo;)
![https://mail.google.com rendered using Original (surf)](/uploads/mail.google.com original.png &lsquo;<a href="https://mail.google.com">https://mail.google.com</a> rendered using Original (surf)')</p>
<h2 id="summary">Summary</h2>
<p>elinks is my favorite of the bunch because of color support.</p>
<p>This blog post is about 10 years too late, and mostly serves to remind myself which version of &ldquo;links&rdquo; I like and why.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../Kyles-Fashion-Style-Guide/" rel="bookmark">Kyle&#39;s (Fashion) Style Guide</a>
  </h2>
  
  <time datetime="2016-01-23T16:24:01Z">
    23 January, 2016
  </time>
  
</header>

  
  <p>I recently read <a href="http://powerevolution.tumblr.com/post/133543612986/why-are-so-many-millennials-so-uncool">&ldquo;Why Are SO Many Millennials SO Uncool?&quot;</a>.
Let&rsquo;s start with a quote:</p>
<blockquote>
<p>*For the purpose of this writing, I’m defining “cool” as those who don’t
conform, who don’t always fit in nor do they try to, and who follow their own
path; and “uncool” as those who dress, act, and have the same tastes as the
masses and are vulnerable to corporate influences.</p>
</blockquote>
<p>Now, I&rsquo;m by no means some sort of authority on <em>coolness</em>. By this definition
there is certainly some degree of subjectivity, but this definition has a hint
of personal-values embedded into it.</p>
<p>In otherwords, this is more than &ldquo;I don&rsquo;t like black socks and sandles&rdquo;, but
more like &ldquo;I value non-corporate-sellouts.&rdquo; At least this value extends beyond
<em>just</em> personal taste.</p>
<h2 id="individuality-versus-popularity">Individuality Versus Popularity</h2>
<p>Anyone can choose to adopt this value. I can appreciate it.</p>
<p>If fully adopted, it seems like this would encompass normal corporate branding
stuff, as well as things that are simply &ldquo;popular&rdquo;. By this definition, wearing
a popular brand name or adopting a trendy style is &ldquo;uncool&rdquo;. This is at odds
with the definition of &ldquo;cool&rdquo; that I learned in middle-school. In fact, in
middle-school the definition of cool was the exact <strong>opposite</strong> of the author&rsquo;s
definition.</p>
<p>This is fine. As we mature into adults, some people outgrow this definition of
coolness. Others do not.</p>
<table>
<thead>
<tr>
<th><img src="../uploads/gucci_bag.jpg" alt="Gucci Bag"></th>
<th><img src="../uploads/etsy_purse.jpg" alt="Etsy Purse"></th>
</tr>
</thead>
<tbody>
<tr>
<td>Corporate Gucci Bag: Uncool</td>
<td>Handmade Etsy Bag: Cool</td>
</tr>
</tbody>
</table>
<p>I can get behind this. I also individuality over popularity. I also dislike
corporate influences. (or heck, external influences in general)</p>
<h2 id="examining-my-tech-wardrobe">Examining My (Tech) Wardrobe</h2>
<p>One of my other personal values is <em>consistency</em>. If I&rsquo;m going to adopt this
value and be consistent, then perhaps I should examine my wardrobe&hellip;</p>
<p>What external corporate ends am I promoting with my wardrobe? Well let&rsquo;s start
with all these technology tshirts:</p>
<table>
<thead>
<tr>
<th><img src="../uploads/docker_shirt.jpg" alt="Docker Shirt"></th>
<th><img src="../uploads/openssl_shirt.jpg" alt="OpenSSL Shirt"></th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker Shirt: Uncool</td>
<td>OpenSSL Shirt: Cool</td>
</tr>
</tbody>
</table>
<p>Both Docker and OpenSSL are open source, but wearing a Docker shirt implicitly
promotes the <em>Docker Company</em>. On the other hand, OpenSSL is goverend by the
OpenSSL Software Foundation. Is wearing a Docker shirt on par with showing
off your Gucci bag?</p>
<table>
<thead>
<tr>
<th><img src="../uploads/ubuntu_shirt.jpg" alt="Ubuntu Shirt"></th>
<th><img src="../uploads/debian_shirt.jpg" alt="Debian Shirt"></th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu Shirt: Uncool</td>
<td>Debian Shirt: Cool</td>
</tr>
</tbody>
</table>
<p>Ubuntu is a product of <em>Canonical</em>. Debian doesn&rsquo;t have any corporate
counterpart.  Is wearing an Ubuntu shirt uncool because you are providing free
advertising for a corporate entity?</p>
<table>
<thead>
<tr>
<th><img src="../uploads/aws_shirt.jpg" alt="AWS Shirt"></th>
<th><img src="../uploads/openstack_shirt.jpg" alt="Openstack Shirt"></th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS Shirt: Uncool</td>
<td>Openstack Shirt: Uncool too</td>
</tr>
</tbody>
</table>
<p>I don&rsquo;t know man, I don&rsquo;t think Openstack shirts are cool either&hellip;.</p>
<h2 id="non-tech">Non-tech</h2>
<p>These above examples are given mostly because the represent a large portion
of my wardrobe. In general the same principle of rejecting corporate sponsors
carries over to non-tech shirts.</p>
<p>I dare say that even wearing shirts with logos of your current or previous
employers are <strong>not</strong> cool.</p>
<h2 id="conclusion">Conclusion</h2>
<p>In general, wearing something that promotes another company&rsquo;s products, I guess
is uncool, even if you like the product or even contribute to it. The root cause
is that you are allowing yourself to be treated as a means to their promotion?</p>
<p>Of course the act of trying to be cool in uncool in itself, so I&rsquo;m pretty sure
I&rsquo;m forever destined to remain&hellip; uncool.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../configuration-management-rosetta-stone-configuring-sensu-with-puppet-chef-ansible-and-salt/" rel="bookmark">A Configuration Management Rosetta Stone: Configuring Sensu with Puppet, Chef, Ansible and Salt</a>
  </h2>
  
  <time datetime="2015-10-11T18:21:14Z">
    11 October, 2015
  </time>
  
</header>

  
  <p>I recently finished my <a href="https://www.udemy.com/sensu-intermediate/?couponCode=xkyle">Intermediate Sensu Training</a> on Udemy.
It was a ton of work but I&rsquo;m glad I got it all together. Part of that training
includes how to deploy and configure <a href="https://sensuapp.org/">Sensu</a> with four
of the most popular open-source configuration management tools:
<a href="https://puppetlabs.com/puppet/what-is-puppet">Puppet</a>,
<a href="https://www.chef.io/chef/">Chef</a>, <a href="http://www.ansible.com/">Ansible</a>, and
<a href="http://saltstack.com/">Salt</a>.</p>
<ul>
<li>TOC
{:toc}</li>
</ul>
<h2 id="the-sensu-decree">The Sensu Decree</h2>
<p>In order to do the training I had to learn each of these tools enough so I could install
a baseline Sensu installation. Here is what I reproduced with each iteration:</p>
<ul>
<li>A Sensu client, Server, and API Setup and Running</li>
<li>RabbitMQ Server, User, and Sensu Vhost ready for use. (no SSL)</li>
<li>Redis installed and running for state</li>
<li>A Sensu check (<code>check_disk</code> and/or <code>check_apache</code>)</li>
<li>The Sensu Mail handler to send emails for alerts</li>
<li>The Uchiwa Dashboard</li>
<li>All on one host (localhost)</li>
</ul>
<p>This was no small feat, and required using a non-trivial number of features of each configuration management system to get the job done.</p>
<p>Here were some other guidelines that I followed in this exercise:</p>
<ul>
<li>Always use 3rd party modules/cookbooks/etc. Use official ones if possible.</li>
<li>Use the local-execution mode provided by the configuration management tool
(no client/server setup)</li>
<li>Follow official docs when available for general guidelines for things like
installation.</li>
<li>Differences in things like config file names or versions of Redis are
inconsequential. As long as Sensu behaved the same I considered it complete.</li>
<li>No considerations for security (out of scope for this exercise)</li>
</ul>
<h2 id="review-of-each-tool">Review of Each Tool</h2>
<h3 id="puppet">Puppet</h3>
<h4 id="puppet-in-general">Puppet In General</h4>
<p>Puppet is my &ldquo;native language&rdquo; when it comes to configuration management, so it
is a little hard for me to imagine what it is like to <em>not</em> know what it is
like to know exactly how it works.</p>
<p>Puppet has a custom DSL to describe configuration in terms of &ldquo;types&rdquo;. These are
the primitives that you can build infrastructure upon, things like &ldquo;files, &ldquo;package&rdquo;,
and &ldquo;service&rdquo;. Third party modules can extend that language with custom types,
allowing you to abstract over the &ldquo;raw&rdquo; types. For example, the RabbitMQ has a
type for providing <code>rabbitmq_user</code>s, which do not correspond to a particular
config file or anything, but instead can only be added by special invocations
of the <code>rabbitmqctl</code> command.</p>
<p>Puppet strongly emphasizes code-reuse. The <a href="https://forge.puppetlabs.com/">Puppet Forge</a> is the registry where you can upload and
share modules. The Forge has a number of methods to help indicate code quality.
It also exposes &ldquo;officially supported&rdquo; and &ldquo;officially approved&rdquo; modules, for
extra approval stamps. While the forge may have a very &ldquo;long tail&rdquo; of modules
that do very common tasks, the set of officially-supported and
officially-approved modules leaves behind a good selection of high-quality
modules ready for re-use.</p>
<p>A common criticism of Puppet is that it does not apply resources in the order that
they are declared in the manifest. Instead, Puppet internally calculates a directed
graph of resources and their dependencies, and executes them in a dependent order, which
is not necessarily in the order in which they are parsed. This is similar to how Linux
package managers install packages. If you run <code>apt-get install apache libc libssl</code>,
the packages will not necessarily get installed in the order that they were
specified on the command line.</p>
<p>Puppet also comes with <a href="http://docs.puppetlabs.com/hiera/1/#why-hiera">Hiera</a>,
a convenient hierarchical key/value store. This store allows users to override
and set site-specific settings to Puppet modules without having to fork or modify
them. Hiera encourages custom hierarchies that meet your business needs, allowing
users to specify settings in a way that makes the most sense for their environments.
And example hierarchy might look something like:</p>
<pre><code>hieradata/
├── common.yaml
├── environment
│   ├── dev.yaml
│   └── prod.yaml
├── datacenter
│   ├── dc1.yaml
│   └── dc2.yaml
└── hostname
    ├── web1.yaml
    └── web2.yaml
</code></pre><p>Then Hiera looks up parameters from most-specific (hostname) to least-specific
(common), and returns the first value that is available.</p>
<h4 id="review-of-the-sensu-puppet-module">Review of the Sensu Puppet Module</h4>
<p>The <a href="https://github.com/sensu/sensu-puppet">sensu-puppet module</a> is a
first-class citizen in the Sensu world. It has native types for the Sensu JSON
files that it manages, as well as a <code>sensu-gem</code> type for easily installing
rubygems with the embedded Sensu ruby.</p>
<p>The Sensu Puppet module only manages Sensu, and has no integration with any
other RabbitMQ, Redis, or any other module. To me this is expected, in the
Puppet world it would be the job of a <code>profile</code> to combine the Sensu module
with RabbitMQ and other things. For the most part this integration is left as
an exercise to the reader.</p>
<p>The Sensu Puppet module also doesn&rsquo;t manage Uchiwa. That requires a
<a href="https://github.com/Yelp/puppet-uchiwa">different puppet module</a>. Again to me
this is a good thing, I hate it when tools try to do too much.</p>
<p>The actual codebase is actively maintained and reasonably active, with a few
releases per year. The Puppet Forge rates it almost perfectly for module quality.
The code has excellent unit test and acceptance test coverage. As far
as Puppet modules go, the Sensu Puppet module is a great example of a
well-maintained piece of code.</p>
<p>One downside the &ldquo;completeness&rdquo; of the module is that sometimes new features of
Sensu are released, and the puppet-module will lag. The configuration inputs to
the puppet module are well-typed, and not just free-form hashes. This gives a
lot of guardrails and helps ensure config files are correct before they hit
the disk, but it means that some features are not usable until the Puppet
module can account for them.</p>
<p>Although the code worked, there was a <a href="https://github.com/sensu/sensu-puppet/issues/336">significant bug</a> that prevented the
module from ever converging. This was annoying but allowed me to test the code.
This bug looks to be fixed in master.</p>
<h3 id="chef">Chef</h3>
<h4 id="chef-in-general">Chef in General</h4>
<p>Chef is not as old as Puppet, but is certainly a mature product. Chef is &ldquo;just
ruby&rdquo; when it comes to its configuration language. The upside to this is that
Ruby developers can theoretically dive in and hack on stuff. The downside to
this is that being &ldquo;just ruby&rdquo;, &ldquo;leaves a lot of rope to hang yourself&rdquo;.</p>
<p>One nice feature provided by the Chef company is their hosted chef solution, which
allows people to get started without hosting a Chef-server.</p>
<p>The Chef toolset also comes with the <code>knife</code> command, which is a great command
line tool for interacting with the Chef-server. It also is a parallel-ssh tool,
manipulates chef cookbooks, and can also launch ec2 (and other) instances. (did
they take the kitchen-sink metaphor too far?)</p>
<p>The <a href="https://supermarket.chef.io/">Chef Supermarket</a> serves as the public
registry for Chef cookbooks. There are not too many quality indicators to see,
to help find which cookbooks are any good. The best metric I could see is just
sorting by &ldquo;followers&rdquo;. This is made up by the fact that there are over
a hundred <a href="https://supermarket.chef.io/users/chef">officially supported cookbooks</a>.</p>
<p>Probably the most difficult aspect of Chef for me to understand was how
attributes interact. This confusion is probably most obvious when you look at
Chef&rsquo;s <a href="https://docs.chef.io/attributes.html#attribute-precedence">15 levels of attribute precedence</a>. It seems
to me that there should be a more obvious way for intent to flow, but I could
be just spoiled by Puppet&rsquo;s Hiera.</p>
<h4 id="review-of-the-chef-sensu-cookbook">Review of the Chef-Sensu Cookbook</h4>
<p>The <a href="https://github.com/sensu/sensu-chef">Sensu Chef Cookbook</a> is also a
first-class citizen in the Sensu-world. Chef is the &ldquo;native config language&rdquo; of
<a href="https://github.com/portertech">Sean Porter</a>, the main author of Sensu. This
gives a lot of credibility to the Cookbook, and shows in the <a href="https://github.com/sensu/sensu-chef/graphs/contributors">contributor page</a>.</p>
<p>The Cookbook itself is feature complete, with recipes for installing and
configuring all aspects of Sensu.</p>
<p>The scope of the cookbook includes all Sensu related technologies, including
RabbitMQ, Redis, and Uchiwa. It is certainly &ldquo;batteries included&rdquo; and on by
default.  It even downloads and compiles <a href="https://github.com/sensu/sensu-chef/issues/340">Redis from source</a> for you.</p>
<p>Another example of this &ldquo;batteries included&rdquo; design is the RabbitMQ module
<a href="https://github.com/jjasghar/rabbitmq/pull/301">setting</a>
<a href="https://github.com/jjasghar/rabbitmq/pull/302/files">Apt</a> attributes. Like the
above Redis example, this behavior surprised me, but technically it is not related to
the Sensu chef cookbook.</p>
<p>At the same time, <a href="https://github.com/portertech/chef-monitor">wrapper cookbooks</a> are recommended as a
method to combine multiple cookbooks together in a coherent way. I think in
general I just expected the wrapper cookbooks to do more and the main Sensu
cookbook to do less.</p>
<p>The cookbook does have an integration test suite, but it is not run via Travis.
The code is under active development, and does multiple releases a year. It has
native support for Chef <a href="https://docs.chef.io/data_bags.html">data bags</a> for
transporting the RabbitMQ SSL support, which is a nice touch (Not tested in
this review).</p>
<h3 id="ansible">Ansible</h3>
<h4 id="ansible-in-general">Ansible in General</h4>
<p>Ansible is a relative newcomer to the configuration management space. Ansible
uses yaml files to define desired state. The yamls files are a nice way to
represent things, but it would be misleading to think that Ansible is just yaml
files. Ansible has its own DSL and uses Jinja2 templating, which is parsed
<em>over</em> the contents of the yaml.</p>
<p>The <a href="https://galaxy.ansible.com/">Ansible Galaxy</a> is the community registry for
uploading shared roles. You can <a href="https://galaxy.ansible.com/list#/roles?page=1&amp;per_page=10&amp;sort_order=owner__username,name&amp;f=apache">sort by rating</a>
to try to get a better idea about which roles are potentially higher quality
than others.</p>
<p>There doesn&rsquo;t seem to be any official roles/playbooks. The closest there is to
official roles is the
<a href="https://github.com/ansible/ansible-examples/tree/master/lamp_simple">ansible-examples</a>
repository. But click the link and look at the <code>lamp_simple</code> example. There is
no code-reuse at all! Every example re-invents how to install apache, install
ntp, configure iptables, etc. What&rsquo;s up with that?</p>
<p>While the yaml files may make it very easy for beginners to make playbooks that
get things done quickly, I don&rsquo;t think they will work out great as
infrastructure expands. The <a href="https://github.com/ansible/ansible-examples/blob/49708518fab943a37bdbf15ee61177155f0cc50f/lamp_simple/roles/web/tasks/install_httpd.yml#L15-L17">abstractions just are not there</a></p>
<p>Another sign, to me, that Ansible has the wrong abstractions is that
so many roles are distro specific.
Not many have the necessary code to work on both &ldquo;CentOS&rdquo; and &ldquo;Debian&rdquo;.  There
is a generic <a href="http://docs.ansible.com/ansible/package_module.html">package</a>
type, but very few roles use it? Check out <a href="https://groups.google.com/forum/#!msg/ansible-project/x2_9PzAJXNE/ZwcBv02oAhkJ">the original author&rsquo;s opinion on the subject</a>.
Look at the examples! They all only work on <code>yum</code> based distributions.</p>
<p>I&rsquo;ve read lots of posts of people migrating to Ansible and loving it.
Personally, I don&rsquo;t get it. The abstractions are too low-level. If you are lucky,
then the Ansible core has a Module to manipulate the resources on the host,
like <a href="http://docs.ansible.com/ansible/rabbitmq_user_module.html">RabbitMQ stuff</a>. If you are
unlucky, then the only primitives you have available are yaml files and
<a href="http://www.hashbangcode.com/blog/adding-iptables-rules-ansible">running commands and parsing stdout</a>.
Or you can write your <a href="http://docs.ansible.com/ansible/developing_modules.html">own module</a>.</p>
<h4 id="ansible-sensu-playbook-review">Ansible Sensu Playbook Review</h4>
<p>There is no official Sensu Ansible playbook. I was not able to find any playbooks
that support RedHat-based distributions.</p>
<p>Luckily, I was able to use <a href="https://github.com/Mayeu/ansible-playbook-sensu">Mayeu&rsquo;s ansible playbook</a>, in conjunction with
this <a href="https://github.com/Mayeu/ansible-playbook-rabbitmq">RabbitMQ playbook</a> on
my Ubuntu server.</p>
<p>The <code>sensu_check</code> module is part of the &ldquo;Extras&rdquo;, but it is only a very small
part of deploying Sensu, and it has no cohesion with the playbook that actually
deploys Sensu itself. There is no way to extend <code>sensu_check</code> without forking
<a href="http://github.com/ansible/ansible-modules-extras">ansible-modules-extras</a>. It
can&rsquo;t consume arbitrary check metadata.</p>
<p>In the end, to meet my needs I had to construct hashes myself and deploy them
to disk as JSON. The playbook-provided way to deploy sensu checks is to have
them all contained in the single
<a href="https://github.com/Mayeu/ansible-playbook-sensu#general-variables">sensu_checks</a>
variable.</p>
<h3 id="salt">Salt</h3>
<h4 id="salt-in-general">Salt in General</h4>
<p>Salt is also a relative new-comer to the configuration management world. As a
user, Salt feels very similar to Ansible. They both use yaml files to represent
the desired state of the system. Both use Jinja templates. Both require the
&ldquo;advanced&rdquo; system interaction to happen with the core stuff, and the
Salt formulas can be just yaml with no real code.</p>
<p>Salt takes a different approach to sharing community code compared to the
other configuration management systems. Salt keeps all the official formulas in
one <a href="https://github.com/saltstack-formulas">GitHub project</a>. The docs recommend
<a href="https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html#adding-a-formula-as-a-gitfs-remote">forking the formula</a>
for your own use. On the plus side, having &ldquo;canonical&rdquo; formulas for common
tasks reduces duplication and encourages code re-use. The downside is that&hellip; it
encourages forking? These formulas in general are not that extensive. They
don&rsquo;t have releases or any kind of testing in place.</p>
<p>Salt&rsquo;s <a href="https://docs.saltstack.com/en/latest/topics/pillar/">Pillar</a> is a powerful tool for separating configuration from code.
It is similar to Puppet&rsquo;s Hiera. Pro: separate config from code; keep
the site-specific variables in a separate folder than the formulas. Con:
formulas have to be &ldquo;pillar-aware&rdquo;. There is no equivalent to Puppet&rsquo;s
<a href="https://docs.puppetlabs.com/hiera/1/puppet.html#automatic-parameter-lookup">automatic parameter lookup</a>.</p>
<h4 id="sensu-salt-formula-review">Sensu Salt Formula Review</h4>
<p>For my testing, I used the official
<a href="https://github.com/saltstack-formulas/sensu-formula">Salt-formula</a>. There is
a sensu-salt repo on the official Sensu project, but it is not really suitable
for production use in my opinion.</p>
<p>For the most part, the formula did what it said on the tin. Of course, like
Ansible, the only way I was able to deploy checks in a flexible way was to
construct my own Hashes and deploy them as JSON directly. There is no such thing
as a <code>sensu_check</code> type in Salt.</p>
<p>I was not able to get rid of the <a href="https://github.com/saltstack-formulas/sensu-formula/blob/5ca104f5aec94a20d206e98fb0d030674c8514b9/sensu/files/conf.d/check_cron.json">hard-coded cron check</a>.
I guess goes with the idea that they expect you to fork the repo and make your
own local changes to meet your needs. I thought I should maybe open an issue for
this, but the file has been there for a year and nobody else has complained. I
figured it was just me, and maybe I should get over myself and accept the fact
that I got a free cron check!</p>
<p>In my own testing, I used the native <code>gem</code> provider with a special path to
Sensu&rsquo;s gem binary to install Sensu gems. But then I discovered that the
formula did this too, but <a href="https://github.com/saltstack-formulas/sensu-formula/blob/5ca104f5aec94a20d206e98fb0d030674c8514b9/sensu/server.sls#L60-L63">in two</a>
<a href="https://github.com/saltstack-formulas/sensu-formula/blob/5ca104f5aec94a20d206e98fb0d030674c8514b9/sensu/client.sls#L89-L92">different ways</a>,
using the <code>cmd.run</code> method instead of the native <code>gem</code> method.  I didn&rsquo;t really
like this, but at the same time, this is the first time I&rsquo;ve ever used Salt.</p>
<p>As far as I can tell, to do more advanced Sensu config things, like filters or
mutators, you are expected to fork the formula and drop in the json file into
<a href="https://github.com/saltstack-formulas/sensu-formula/tree/5ca104f5aec94a20d206e98fb0d030674c8514b9/sensu/files/mutators">the right directory</a>.</p>
<h2 id="comparison">Comparison</h2>
<p>A rough opinionated comparison between the tools, with regards the tool itself
and the tool in conjunction with Sensu. &ldquo;High&rdquo; doesn&rsquo;t necessarily mean &ldquo;good&rdquo; here:</p>
<table>
<thead>
<tr>
<th></th>
<th>Puppet</th>
<th>Chef</th>
<th>Ansible</th>
<th>Salt</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Review of The Config Management Tool in General</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Version used</td>
<td>3.4.3</td>
<td>12.4.1</td>
<td>1.5.4</td>
<td>2015.5.3</td>
</tr>
<tr>
<td>Third Party Module Easy of Use</td>
<td>High</td>
<td>High</td>
<td>Medium</td>
<td>Low</td>
</tr>
<tr>
<td>Official Sensu Support for the Tool</td>
<td>High</td>
<td>High</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td>Reproducibility</td>
<td>High</td>
<td>High</td>
<td>High</td>
<td>High</td>
</tr>
<tr>
<td>Easy of use getting started</td>
<td>Medium</td>
<td>Medium</td>
<td>High</td>
<td>Medium</td>
</tr>
<tr>
<td>Language extensibility</td>
<td>High</td>
<td>High</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td>Separation between config data and code</td>
<td>Hiera</td>
<td>Databags/Attributes</td>
<td>just variables?</td>
<td>Pillar</td>
</tr>
<tr>
<td>Module re-usability?</td>
<td>High</td>
<td>High</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td><strong>Review of the Sensu Module/Cookbook/Etc</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Version of the module Used</td>
<td>1.5.5</td>
<td>2.10.0</td>
<td>0.1.0</td>
<td>c6324b3</td>
</tr>
<tr>
<td>Sensu Module Feature Completeness</td>
<td>High</td>
<td>High</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr>
<td>Sensu Module Integration with Other Modules</td>
<td>Low</td>
<td>Extreme?</td>
<td>None</td>
<td>None</td>
</tr>
<tr>
<td>Sensu Module Flexibility</td>
<td>High</td>
<td>High</td>
<td>Medium</td>
<td>Low</td>
</tr>
<tr>
<td>Sensu Module Re-usability</td>
<td>High</td>
<td>High</td>
<td>High</td>
<td>Low</td>
</tr>
<tr>
<td>How Opinionated Was It?</td>
<td>Low</td>
<td>High</td>
<td>Low</td>
<td>Medium</td>
</tr>
<tr>
<td>Usability with Sensu&rsquo;s Embedded Ruby</td>
<td>Yes</td>
<td>Yes</td>
<td>Not natively</td>
<td>Sorta</td>
</tr>
</tbody>
</table>
<h2 id="conclusion">Conclusion</h2>
<p>The way I see it, there are two camps. Chef and Puppet both provide a rich
language to build modules with. For example, the <a href="https://forge.puppetlabs.com/puppetlabs/rabbitmq">PuppetLabs RabbitMQ module</a> contains all the code
to interact with RabbitMQ. The main Puppet codebase doesn&rsquo;t know anything about
RabbitMQ. The same goes for Chef. Both Chef and Puppet also have their own DSL.
Puppet uses yaml files for Hiera, but they are for config only, unlike
Ansible/Salt.</p>
<p>In the other camp is Ansible and Salt. They have a simplified config language,
and require the help from the core software to do the &ldquo;heavy lifting&rdquo; of the
raw types. For example, the Salt <a href="https://github.com/saltstack-formulas/rabbitmq-formula/blob/master/rabbitmq/config.sls#L29">RabbitMQ formula</a>
requires the help of <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.rabbitmq.html">core Salt RabbitMQ module</a>
to provide the primitives.</p>
<h3 id="final-thoughts">Final Thoughts</h3>
<ul>
<li>Puppet
<ul>
<li>Directed graph dependency ordering, not parse-order driven</li>
<li>Type/Provider system and defined types provide the right abstraction layers to build upon.</li>
<li>Hiera provides a good separation of config/code, making it easier to reuse modules without modification.</li>
<li>Strong culture of testing</li>
<li>Lots of good supported modules</li>
<li>High deployment overhead and language learning curve</li>
</ul>
</li>
<li>Chef
<ul>
<li>LWRP system provides the right abstraction layers to build upon.</li>
<li>Knife tool does do a lot of cool stuff</li>
<li>Lots of good supported cookbooks</li>
<li>Strong culture of testing</li>
<li>&ldquo;Just ruby&rdquo;</li>
<li>15 levels of attribute precedence is insane</li>
</ul>
</li>
<li>Ansible
<ul>
<li>Low deployment overhead and low learning curve</li>
<li>&ldquo;Just yaml files&rdquo;</li>
<li>Lack of type/providers means that playbooks use &ldquo;apt&rdquo; and &ldquo;yum&rdquo; directly, which kinda sucks</li>
</ul>
</li>
<li>Salt
<ul>
<li>Pillar provides a nice separation of config/code, which is good for formula-reuse, if the formula is pillar-aware</li>
<li>Centralized formulas emphasize consolidated development effort</li>
<li>No strong state testing emphasis or framework</li>
</ul>
</li>
</ul>
<h2 id="going-further">Going Further</h2>
<p>If you want to know more about Sensu, of course you can take my training course:</p>
<ul>
<li><a href="https://www.udemy.com/sensu-introduction/">Sensu-Introduction</a> (Free)</li>
<li><a href="https://www.udemy.com/sensu-intermediate/?couponCode=xkyle">Sensu-Intermediate</a> (50% off, $50)</li>
</ul>
<p>Or you can tell me I&rsquo;m wrong. You can raise and
<a href="https://github.com/solarkennedy/xkyle.com/issues/new">issue</a> or make a
<a href="https://github.com/solarkennedy/xkyle.com/pulls">pull-request</a> for the blog
post or investigate my actual training material and code on
<a href="https://github.com/solarkennedy/sensu-training/tree/master/intermediate/lectures">Github</a>.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/Puppet/" rel="tag">puppet</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/chef/" rel="tag">chef</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/ansible/" rel="tag">ansible</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/salt/" rel="tag">salt</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/sensu/" rel="tag">sensu</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>


<nav>
  
  <a class="Pagination u-clickable" href="../../page/3/" rel="prev">« Previous</a>
  
  
  <a class="Pagination Pagination--right u-clickable" href="../../" rel="next">Next »</a>
  
</nav>




      </div>
    </div>
  </main>
  
<footer class="Footer">
  <div class="u-wrapper">
    <div class="u-padding">
      Except where otherwise noted, content on this site is licensed under a a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"> Creative Commons Attribution 4.0 International License</a>.
    </div>
  </div>
</footer>


</body>
</html>
