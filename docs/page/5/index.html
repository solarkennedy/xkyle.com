<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.66.0" />
  
  
  
  <title>
    
    xkyle.com
    
  </title>
  <link rel="canonical" href="../../">
  
  <link rel="alternate" type="application/rss+xml" href="../../index.xml" title="xkyle.com">
  
  
  
  
  
  
  



































































  
  <link rel="stylesheet" href="../../css/base.min.50883c9e7cc6f561db1dcd2089b6b895c60df8d10b9e71a90cbc10e59c8bfc40.css" integrity="sha256-UIg8nnzG9WHbHc0giba4lcYN&#43;NELnnGpDLwQ5ZyL/EA=" crossorigin="anonymous">
  
  
</head>
<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="">xkyle.com</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="about/">About</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="post/">Posts</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="tags/">Tags</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="categories/">Categories</a>
      </li>
      
      <li class="Banner-item">
        <a class="Banner-link u-clickable" href="index.xml">RSS</a>
      </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        



<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../my-first-published-puppet-module-bios/" rel="bookmark">My First Published Puppet Module: bios</a>
  </h2>
  
  <time datetime="2013-04-15T21:06:09Z">
    15 April, 2013
  </time>
  
</header>

  
  <h1 id="what">What?</h1>
<p>I&rsquo;ve written lots of crappy Puppet modules. Here is a slightly less crappy module that can help you configure BIOS settings on your servers for you.</p>
<p>It works on Dell C class servers and Intel platforms. Please pull request or email me if you want to have it work on something else too!</p>
<h1 id="why">Why?</h1>
<p>BIOS settings should be considered configuration just like any other configuration, and hence managed by your configuration management tool, if possible.</p>
<p><a href="http://forge.puppetlabs.com/KyleAnderson/bios">http://forge.puppetlabs.com/KyleAnderson/bios</a></p>
<p><a href="https://github.com/solarkennedy/puppet-bios">https://github.com/solarkennedy/puppet-bios</a></p>
<h1 id="how"> How?</h1>
<p>Install it:</p>
<pre><code>puppet module install KyleAnderson/bios
</code></pre>
<p>Here are some examples on how to use it:</p>
<pre><code># Easy to set turbo on a dell 
bios::setting {'turbo_mode': value =&gt; 'disabled' } 

# Intel requires some more hand holding with turbo. You set 1/0 and expect Enabled/Disabled.. 
bios::setting {'Intel(R) Turbo Boost Technology': value =&gt; '0', expect =&gt; 'Disabled', section =&gt; 'Processor Configuration' }

# Set fan speed on intel: 
bios::setting {'Fan PWM Offset': value =&gt; '100', section =&gt; 'System Acoustic and Performance Configuration' }

# Disabled Cstates on dell:
bios::setting {'c_states': value =&gt; 'disabled' }
</code></pre>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/bios/" rel="tag">bios</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/dell/" rel="tag">dell</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/hp/" rel="tag">hp</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/intel/" rel="tag">intel</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/Puppet/" rel="tag">Puppet</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../puppet-on-openwrt/" rel="bookmark">Puppet on OpenWrt!</a>
  </h2>
  
  <time datetime="2013-03-31T19:38:28Z">
    31 March, 2013
  </time>
  
</header>

  
  <h1 id="puppetopenwrtuploadspuppetopenwrtjpguploadspuppetopenwrtjpg"><a href="../../uploads/puppet+openwrt.jpg"><img src="../../uploads/puppet+openwrt.jpg" alt="puppet+openwrt"></a></h1>
<h1 id="status">Status:</h1>
<ul>
<li>
<p>Github Repo is here: <a href="https://github.com/solarkennedy/puppet-on-openwrt/">https://github.com/solarkennedy/puppet-on-openwrt/</a></p>
</li>
<li>
<p>OpenWrt package files are submitted for inclusion</p>
</li>
<li>
<p>Puppet/facter patches have been included in Trunk for inclusion in puppet 3.2</p>
</li>
<li>
<p>Binary packages have been made for early adopters (and me)</p>
</li>
</ul>
<h1 id="why">Why?</h1>
<p>To scratch my own itch, and for Fun!</p>
<h1 id="how">How?</h1>
<p>Downloads are here: <a href="http://download.xkyle.com/openwrt/">http://download.xkyle.com/openwrt/</a></p>
<p>Because of the dependencies, it is probably easier to add the repo:</p>
<pre><code>. /etc/openwrt_release
VERSION=`echo $DISTRIB_RELEASE | cut -f 1 -d -`
TARGET=`echo $DISTRIB_TARGET | cut -f 1 -d /`
LINE=&quot;src/gz puppet-packages http://download.xkyle.com/openwrt/$VERSION/$TARGET&quot;
grep -q &quot;$LINE&quot; /etc/opkg.conf || echo &quot;$LINE&quot; &gt;&gt; /etc/opkg.conf
</code></pre>
<p>Then run:</p>
<pre><code>opkg update; opkg install puppet
</code></pre>
<h1 id="help">Help?</h1>
<p>Running Puppet on OpenWrt is still far from perfect. There are going to be lots of bugs to be worked out. There are many use-cases / puppet modules / openwrt targets that I am not testing. If you think there is something wrong that could use fixing, feel free to open a <a href="https://github.com/solarkennedy/puppet-on-openwrt/issues/new">Github Issue</a>. I don&rsquo;t want to bother upstream OpenWrt or Puppet with questions until things are better tested.</p>
<p>To reiterate: Don&rsquo;t comment on the blog if something doesn&rsquo;t work. Open a <a href="https://github.com/solarkennedy/puppet-on-openwrt/issues/new">Github Issue</a>. And yes, things are going to be broken. Lets work together to fix them one at a time.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../picking-server-hostnames-worstest-worser-worst-better-betterer-bestest/" rel="bookmark">Picking Server Hostnames: Worstest, Worser, Worst... Better, Betterer, Bestest</a>
  </h2>
  
  <time datetime="2013-03-27T23:58:32Z">
    27 March, 2013
  </time>
  
</header>

  
  <p>Picking a server hostname is a<a href="http://xkcd.com/910/"> big deal</a>. I&rsquo;ve seen quite a few, lets traverse the hostname-awesomeness-continuum and see if we can learn something.</p>
<h1 id="worsest">Worsest</h1>
<ul>
<li>morpheous</li>
<li>trinity</li>
<li>alf</li>
</ul>
<p>Why do these suck? These names have <strong>no information</strong> what-so-ever. If you see a server alert, you have no clue what services are actually down. It might as well be a random string. IT is a random string.</p>
<blockquote>
<p><em>Pro Tip: Don&rsquo;t give make server hostnames random strings.</em></p>
</blockquote>
<p>You wouldn&rsquo;t do this would you?
hostname <code>shuf -n 1 /usr/share/dict/words</code></p>
<p><a href="../../uploads/bios-meme.jpg"><img src="../../uploads/bios-meme-300x225.jpg" alt="bios-meme"></a>
Additionally, the name almost <strong>enables</strong> admins to overload the server with multiple services. &ldquo;What server should we run DNS on? Put it on Alf, it has some spare cycles.&rdquo; That conversation would not happen if the server was called &ldquo;db04&rdquo;. Also we have no way to judge the urgency of a server outage without being very familiar with the services it provides.</p>
<p>Oh, and it doesn&rsquo;t scale. Say it with me here: **Servers are not Precious Snowflakes! **And no, giving your server&rsquo;s custy names does NOT increase your security. Prove me wrong.</p>
<h1 id="worser">Worser</h1>
<ul>
<li>msr2</li>
<li>eln4</li>
<li>wtf5</li>
</ul>
<p><a href="../../uploads/36743853.jpg"><img src="../../uploads/36743853-300x225.jpg" alt="36743853"></a>These names sometimes come from ancient department abbreviations  or maybe three unrelated words. They also might hint at being part of a collection, but many times they are indicators of server cruft. For example, wtf5 could be the fifth server in a long line of failures. wtf1-4 don&rsquo;t exist anymore, sorry for the confusion.</p>
<p>Don&rsquo;t do this! I appreciate the brevity, but save it for DNS CNAMES. I can understand naming something &ldquo;server2&rdquo; during an upgrade from &ldquo;server&rdquo;, but unless you have good reason, rename it back when you are done. Future employees will thank you and it makes your infrastructure _<strong>feel</strong> _cleaner.</p>
<p>And no, incrementing the number on the end of your hostname on every new server rebuild does not make you more secure. Prove me wrong again.</p>
<h1 id="worse">Worse</h1>
<ul>
<li>srv001-100</li>
<li>dell01-08</li>
<li>node01-99</li>
</ul>
<p>We are getting slightly better here I think. This is another anti-pattern I have seen in the wild: pick a generic name and span it across the range. Fill up the servers as needed.</p>
<p>Whyyy!!? Again, there is no inherent information or context from the hostname. I have no idea what runs on dell07. Sure I know it is a Dell. Or is it?</p>
<blockquote>
<p>Pro Tip: Bake tribal knowledge into your infrastructure by setting descriptive hostnames.</p>
</blockquote>
<h1 id="better"><strong>Better</strong></h1>
<ul>
<li>clientname</li>
<li>different-client</li>
<li>legacy-name (that has no relevant meaning today)</li>
</ul>
<p>The world isn&rsquo;t perfect. Sometimes it does make sense to group services by a client&rsquo;s name, or maybe because you have some legacy that you want self-contained on a single server. Could be as good as it gets.</p>
<h1 id="betterer">Betterer</h1>
<ul>
<li>dns1-5</li>
<li>backend01-04</li>
<li>fe01-99</li>
</ul>
<p>These are nice. I have a good idea about what these servers do, how important it is if one goes down, what services are impacted, etc. These are pretty much bestest, honestly.</p>
<p>I&rsquo;m conflicted on leading zeros. Future proofing is one thing, but how many dns servers do you honestly anticipate building? Better than this though: [ mail, mail1, mail2, mail3 ]. Ug. Renaming is not nearly as hard as people think. Hostnames are **NOT **permanent.</p>
<h1 id="bestest">Bestest</h1>
<ul>
<li>db01a</li>
<li>nfs01-04</li>
<li>mail</li>
</ul>
<p><a href="../../uploads/36744679.jpg"><img src="../../uploads/36744679-300x300.jpg" alt="36744679"></a>Yes. To me these are perfect. The very name of the server implies what runs on it, and deters admins from running other things on it. We are talking <em>one logical service per server</em>.</p>
<p>I like db01a because it implies that there is a pair, db01b. (Bonus points for a db01 floating ip, if applicable)</p>
<p>mail: It is the mail server. Don&rsquo;t let your co-workers tell you that you are un-creative. They don&rsquo;t even <em>know</em>. Not every situation calls out for an HA solution, sometimes it is ok to have a mail server.</p>
<h1 id="conclusion">Conclusion</h1>
<p>I have no idea what your situation is, don&rsquo;t listen to me. Picking server hostnames is a <a href="https://en.wikipedia.org/wiki/Parkinson's_law_of_triviality">bikeshed </a>problem. Pick one and move on with your life.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/hostnames/" rel="tag">hostnames</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/rant/" rel="tag">rant</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../decoding-balanced-payments-puzzle-1/" rel="bookmark">Decoding Balanced Payments Puzzle 1</a>
  </h2>
  
  <time datetime="2013-03-21T02:04:43Z">
    21 March, 2013
  </time>
  
</header>

  
  <p>A strange string appeared at the bottom of a Balanced <a href="http://blog.balancedpayments.com/balanced-payments-operations-automated-testing-continuous-deployment-jenkins/">Payments blog post</a>:</p>
<blockquote>
<p>NmQ2ZjYzMmU3Mzc0NmU2NTZkNzk2MTcwNjQ2NTYzNm
U2MTZjNjE2MjQwNjU2MzZlNjU3MjY1NjY2NjY5NjQ2MTY1N
mI2MTZkNmY3NDc0NmU2MTc3Njk=</p>
</blockquote>
<p>One of those puzzles to attract coders I guess. The guys at <a href="https://news.ycombinator.com/item?id=5409062">Hacker News</a> spilled the beans, so lets spill them some more.</p>
<p>First though,** Mad Props** to the Balanced team for thinking &ldquo;outside&rdquo; the unit-test-box. Plus Jenkins rocks. The world needs more Jenkins. </p>
<h1 id="bash">Bash?</h1>
<p>I&rsquo;m not a developer, so my first instinct was to use the existing set of tools that people have <em>already written</em> to solve this puzzle:</p>
<pre><code>curl -s http://blog.balancedpayments.com/balanced-payments-operations-automated-testing-continuous-deployment-jenkins/ \
| html2text | grep -P '[^.*]=$' | head -n 1 | base64 -d \
| sed 's/../0x&amp; /g' | xxd -r -c 100 | rev
</code></pre>
<p>I love the command line.</p>
<h1 id="python">Python?</h1>
<p>The Balanced guys look like they are Python people. That&rsquo;s cool. <a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> is the only Python html parser I&rsquo;ve used:</p>
<pre><code>import urllib2
import BeautifulSoup
import re, base64
content = urllib2.urlopen('http://blog.balancedpayments.com/balanced-payments-operations-automated-testing-continuous-deployment-jenkins/').read()
soup = BeautifulSoup.BeautifulSoup(content)
# Last pre has the base64 string
string = soup.findAll('pre')[-1].getText()
print base64.b64decode(string).decode('hex')[::-1]
</code></pre>
<h1 id="ruby">Ruby?</h1>
<p><a href="https://github.com/hpricot/hpricot">Hpricot</a> is the only Ruby html parser I&rsquo;ve used. Also, I love**_ .map_**:</p>
<pre><code>require 'hpricot'
require 'open-uri'
require 'base64'
thehtml = open('http://blog.balancedpayments.com/balanced-payments-operations-automated-testing-continuous-deployment-jenkins/') { |f| Hpricot(f) }
string = thehtml.search(&quot;//pre&quot;)[1].to_plain_text
puts Base64.decode64(string).scan(/../).map {|a| a.to_i(16).chr}.join.reverse
</code></pre>
<h1 id="conclusion">Conclusion</h1>
<p>Solving puzzles is a fun way to learn new things! If you are hungry for more excuses to learn how to use languages, check out <a href="https://projecteuler.net/">Project Euler</a>.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/bash/" rel="tag">bash</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/programming/" rel="tag">programming</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/python/" rel="tag">python</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/ruby/" rel="tag">ruby</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../hacking-a-hallmark-text-band-first-attempt/" rel="bookmark">Hacking a Hallmark Text Band: First Attempt</a>
  </h2>
  
  <time datetime="2013-03-14T04:08:20Z">
    14 March, 2013
  </time>
  
</header>

  
  <p>The <a href="http://www.textbands.com/">Hallmark Text Band</a> is a strange thing:</p>
<p><a href="../../uploads/P3130076.jpg"><img src="../../uploads/P3130076-300x235.jpg" alt="Hallmark Text Band"></a></p>
<p>Doesn&rsquo;t Hallmark know kids have cell phones now?
Anyway, it is an extremely simple micro-controller driving a led matrix and a <a href="http://www.c-max.com.hk/en/technology/rfcomm/2_4g_trans_ic">C-Max CMM-9201</a>. You get 10 characters, and a small reed-switch? triggers a hardware interrupt, and broadcasts your 10 characters to a friend, and you swap messages. The devices holds 24 messages, FIFO. Memory is volatile. Profanity filter included.</p>
<p>Oh well. Lets hack it.</p>
<p>I don&rsquo;t have any fancy hardware to listen to the RF. I decided to sniff the SPI bus with a <a href="http://dangerousprototypes.com/docs/Bus_Pirate">Bus Pirate</a> (Sparkfun version).</p>
<p><a href="../../uploads/P3130078.jpg"><img src="../../uploads/P3130078-300x224.jpg" alt=""></a><a href="../../uploads/P3130081.jpg"><img src="../../uploads/P3130081-300x300.jpg" alt=""></a></p>
<p>With the Bus Pirate I&rsquo;ve tried using the SPISniffer and the text interface in SPI monitor mode. I&rsquo;ve tried all sorts of variations of speed, etc, and I can&rsquo;t get a reliable output.</p>
<p>I should be able to use the bus pirate in SPI monitor mode and tap it right in the middle of the bus, right? (between the controller and the wireless modules)</p>
<p>Setting the Bus Pirate to only give me data when CS goes low (according to the datasheet) should give me data only when it transmits, but it doesn&rsquo;t. I get lots of strange output:</p>
<pre><code>[0x08(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x0A(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x0A(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x0A(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x14(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x08(0x28)0x00(0x29)]
[0x14(0x28)0x00(0x29)]
</code></pre>
<p>When the device does transmit, I get some sort of data, but it just looks like more of this randomness:</p>
<pre><code>[0x6E(0x28)0x00(0x29)0x6C(0x28)0x00(0x29)0x9C(0x28)0x00(0x29)0xB8(0x28)0x00(0x29)0x10(0x28)0x00(0x29)]
[0x81(0x28)0x00(0x29)0x1F(0x28)0x00(0x29)0x7E(0x28)0x00(0x29)0x9E(0x28)0x00(0x29)0x9E(0x28)0x00(0x29)0x3F(0x28)0x00(0x29)0x1B(0x28)0x00(0x29)0xB8(0x28)0x00(0x29)0xAA(0x28)0x00(0x29)0xAA(0x28)0x00(0x29)0xAB(0x28)0x00(0x29)0xFE(0x28)0x00(0x29)0xAB(0x28)0x00(0x29)0xF8(0x28)0x00(0x29)0xAB(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)0x55(0x28)0x00(0x29)]
[0x9C(0x28)0x00(0x29)]
[0xC0(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)0x00(0x28)0x00(0x29)]
</code></pre>
<p>Is this the message? I&rsquo;m a hardware hacking noob. Criticism welcome.</p>
<h2 id="things-to-discover">Things to Discover</h2>
<ul>
<li>
<p>Does the profanity filter get applied on sending, receiving, or both?</p>
</li>
<li>
<p>How is the 10 character limit imposed? Could I buffer overrun it?</p>
</li>
<li>
<p>There could be more uses for this if I could come up with a USB interface for one, and a high gain 2.4ghz antenna&hellip;</p>
</li>
</ul>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/bus-pirate/" rel="tag">bus pirate</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/hardware/" rel="tag">hardware</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/spi/" rel="tag">spi</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/text-band/" rel="tag">text band</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../validating-graphite-metrics-with-bash/" rel="bookmark">Validating Graphite Metrics With Bash!</a>
  </h2>
  
  <time datetime="2013-03-07T05:35:49Z">
    7 March, 2013
  </time>
  
</header>

  
  <p>At my dayjob I get to work with <a href="http://graphite.wikidot.com/">Graphite</a> and power meters. It is cool:</p>
<p><a href="../../uploads/power-breakdown.png"><img src="../../uploads/power-breakdown.png" alt="power-breakdown"></a></p>
<p>To make it easy for my clients to get power information, I&rsquo;ve written a command line tool called &ldquo;power&rdquo; that they can run to get the power usage for a server when running their program. Here is an example:</p>
<pre><code>power METER-NAME sleep 10s
</code></pre>
<p>Pretty handy. The &ldquo;METER-NAME&rdquo; is pretty important, as it lets the script know which system&rsquo;s power you are interested in. (It is optional, by default I let it return the power of the server that you are currently on, but this isn&rsquo;t always true for all workloads)</p>
<h2 id="problem">Problem</h2>
<p>The thing is, my power meters and lab environment change often. I&rsquo;m tired of updating the script to reflect the state of my lab. Can&rsquo;t the script figure itself out on it&rsquo;s own? Yes. Yes it can.</p>
<h2 id="spot">S.P.O.T.</h2>
<p>I believe in a <a href="https://github.com/teddziuba/teddziuba.github.com/blob/master/_posts/2011-06-30-most-important-concept-systems-design.html">Single Point Of Truth</a>. Where is my SPOT regarding power data in my system? I can tell you where it isn&rsquo;t: it** isn&rsquo;t** in my script. It is in the Graphite database ya dingus.</p>
<p>When my users run power -l, I want it to list valid power meters, but not some hand-curated list. I want a real list, straight from the source. Lets do that, and I will never have to update the script again.</p>
<h2 id="list-those-metrics">List Those Metrics</h2>
<p>So how can we get a list of all metrics with similar names? Easy:</p>
<pre><code>wget -q -O - &quot;http://$GRAPHITEHOST/render/?target=power.*.watts&amp;format=json&amp;from=-5second&quot;
</code></pre>
<p>As far as I can tell, there isn&rsquo;t really a way to get just a list of metrics without data too, but that is ok. We need the data for the next validation step&hellip;</p>
<h2 id="validate-those-metrics">Validate Those Metrics</h2>
<p>I crank my power metrics to the second, and the above api query will even return stale metrics, metrics that have old data, typo&rsquo;ed metrics, etc. They will just have null data in the json.</p>
<p>Heck man, we can just grep that out:</p>
<pre><code>| egrep -v 'null.*null.*null.*null.*null'
</code></pre>
<p>This will filter out any metric that doesn&rsquo;t have up-to-the second data. Great! Side note: some of my meters might run a little behind, so they might have some null&rsquo;s. I only grep out meters that are missing the last 5 seconds of data, that indicates that they really are stale.</p>
<p>Full line:</p>
<pre><code>wget -q -O - &quot;http://$GRAPHITEHOST/render/?target=power.*.watts&amp;target=power.*.ipmi_power&amp;format=json&amp;from=-5second&quot; | sed 's/target/\n/'g | egrep -v 'null.*null.*null.*null.*null' \
| tr '&quot;' &quot;\n&quot; | grep &quot;^power&quot; | cut -f 2 -d &quot;.&quot; | sort -u
</code></pre>
<p>Obviously this is specific to my environment. You young whipper-snappers will probably have fancy json parsers and junk to validate your own metrics.</p>
<h2 id="bonus-points-bash-tab-completion">Bonus Points: Bash Tab Completion</h2>
<p>So that is cool. Now the script will only let your run against metrics that have fresh data.</p>
<p>Now, I&rsquo;m super lazy. Not only do I <strong>not</strong> want to keep my script up to date with valid metrics, I also cannot be bothered to remember which ones are active, and I certainly don&rsquo;t want to <strong>fully type them out</strong>.</p>
<p>Bash completion to the rescue. My script responds to &ldquo;power -l&rdquo; to report the list. Here is some code to go in bash_completion.d to help users discover the meters and enable them to be lazy:</p>
<pre><code>_power() {
  local cur
  cur=${COMP_WORDS[COMP_CWORD]}
  if [ $COMP_CWORD -eq 1 ]; then
    # First argument is the power meter
    powermeters=`power -l`
    COMPREPLY=( $(compgen -W &quot;$powermeters&quot; -- $cur) )
    return 0
  else
    # Everthing else will be a normal command
    COMPREPLY=( $(compgen -c -- $cur) )
    return 0
  fi
complete -F _power power
</code></pre>
<p>All of the <a href="https://wiki.xkyle.com/Bash_Completion">bash completion code</a> I&rsquo;ve written in my life is <a href="https://en.wikipedia.org/wiki/Cargo_cult_programming">cargo-cultish</a>. It sure is nice to have good tools though.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/bash/" rel="tag">bash</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/graphite/" rel="tag">graphite</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/power/" rel="tag">power</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../an-ipmi-sel-viewing-shootout/" rel="bookmark">An IPMI SEL Viewing Shootout!</a>
  </h2>
  
  <time datetime="2013-02-13T06:08:18Z">
    13 February, 2013
  </time>
  
</header>

  
  <h1 id="update-2015-02-18">UPDATE (2015-02-18)</h1>
<p>Albert Chu from FreeIPMI <a href="https://github.com/solarkennedy/ipmi-sel-comparison/issues/1">commented</a>
that FreeIPMI does <em>NOT</em> attempt to decode OEM events by default. These are events that
are OEM specific, so each motherboard may require a different interpretation.</p>
<p>FreeIPMI has a <code>--interpret-oem-data</code> option and possibly in conjunction with
the <code>-W assumesystemevent</code> option, to attempt to decode these.</p>
<p>Unfortunately I no longer have the motherboard I originally ran these on.
I might do a followup post with a new motherboard with similar &ldquo;issues&rdquo; and
see how FreeIPMI compares to the other tools with these options.</p>
<h2 id="intro">Intro</h2>
<p>Servers are like women. You are supposed to know their needs.
<a href="../../uploads/server_meme.png"><img src="../../uploads/server_meme.png" alt="Server Says: If you don&rsquo;t know what&rsquo;s wrong, I&rsquo;m not going to tell you"></a></p>
<p>So how do you know what is wrong with your server when it isn&rsquo;t giving you any hints? <strong>IPMI Server Event Logs (SEL).</strong></p>
<h2 id="the-problem">The Problem</h2>
<p>There are four different tools I&rsquo;m going to look at that can examine the SEL. Let&rsquo;s take the same server and events and run them through the tools to see how it looks. Unfairly I will also be using a vendor-specific tool, Intel SELVIEW on an Intel server.</p>
<h2 id="procedure">Procedure</h2>
<p>Check out <a href="https://github.com/solarkennedy/ipmi-sel-comparison">https://github.com/solarkennedy/ipmi-sel-comparison</a> up-to-date code on my procedure. It may get updated with more tools and output. For this blog post I&rsquo;m comparing the following utilities:</p>
<ul>
<li>
<p><a href="http://ipmiutil.sourceforge.net/">ipmiutil</a> 2.82</p>
</li>
<li>
<p><a href="http://www.gnu.org/software/freeipmi/">freeipmi</a> 1.2.1</p>
</li>
<li>
<p><a href="http://ipmitool.sourceforge.net/">ipmitool</a> 1.8.11</p>
</li>
<li>
<p><a href="http://www.intel.com/support/motherboards/server/sb/CS-031911.htm">SELVIEWER</a> 11.0 Build 5</p>
</li>
</ul>
<h2 id="comparison">Comparison</h2>
<p>Hopefully I got it all correlated correctly. Please feel free to check my code. Let&rsquo;s see some events and how each utility decodes them.</p>
<h3 id="event-88-some-sort-of-bios-update"> Event 88: Some sort of BIOS Update?</h3>
<pre><code>freeipmi: Unknown SEL Record Type: 3h
ipmitool: Version Change #0x12 | 
ipmiutil: 0 4e 20 00 04 2b 12 70 00 10 ff 
selview : Version Change,FW Update Status (#0x12) Informational event: FW Update Status reports BIOS Update started with version 99.99.x038. Integrated BMC - LUN#0 (Channel#0)
</code></pre>
<p><strong>Freeipmi</strong> doesn&rsquo;t know what to say. <strong>ipmitool</strong> at least knows there was a version change. <strong>Ipmiutil</strong> spits out the raw hex. <strong>Selview</strong> the most descriptive output, including the actual version number, with the next event reporting the version it was updated to.</p>
<h3 id="event-117-non-critial-low-voltage">Event 117: Non-critial low voltage</h3>
<pre><code>freeipmi: BB +1.1V STBY | Voltage | Lower Non-critical - going low ; Sensor Reading = -0.01 V ; Threshold = 0.96 V
ipmitool: Voltage #0xdd | Lower Non-critical going low 
ipmiutil: MIN BMC Voltage #dd Lo Noncrit thresh act=00 thr=bf
selview : Voltage,BB +1.1V STBY (#0xDD) Warning event: BB +1.1V STBY reports the sensor is in a low, but non-critical, and going lower state. Sensor reading: -0.0122 Volts. Threshold value: 0.96381 Volts. Integrated BMC - LUN#0 (Channel#0)
</code></pre>
<p><strong>Freeipmi</strong> and <strong>selview</strong> get props here for letting us know what the values of the voltage and what the threshold is. <strong>Selview</strong> gives us the most human-readable output. <strong>ipmitool</strong> and <strong>ipmiutil</strong> are not super helpful, as I don&rsquo;t know what dd or bf mean.</p>
<h3 id="event-346-bad-ram">Event 346: Bad RAM</h3>
<pre><code>freeipmi: POST Err Sensor | System Firmware Progress | System Firmware Error ; OEM Event Data2 code = 23h ; OEM Event Data3 code = 85h
ipmitool: System Firmware Error #0x06 | Unknown Error | Asserted
ipmiutil: MAJ EFI System Firmware #06 DIMM_B1 failed test/initialization 6f [a0 23 85]
selview : System Firmware Progress,POST Err Sensor (#0x06) Warning event: POST Err Sensor reports DIMM_B1 failed test/initialization. BIOS - LUN#0 (Channel#0)
</code></pre>
<p><strong>ipmiutil</strong> and <strong>selview</strong> win here for telling me which slot is bad (DIMM_B1). <strong>ipmitool</strong> and <strong>freeipmi</strong> lose, as they do not give us this crucial piece of information.</p>
<h3 id="event-857-server-cooling-down-from-overheating">Event 857: Server Cooling Down from overheating</h3>
<pre><code>freeipmi: Exit Air Temp    | Temperature                 | Upper Critical - going high ; Sensor Reading = 73.00 C ; Threshold = 85.00 C
ipmitool: Temperature #0x2e | Upper Critical going high
ipmiutil: INF BMC  Temperature #2e HiC thresh OK now act=49 thr=55
selview : Temperature,Exit Air Temp (#0x2E)     CRITICAL event: Exit Air Temp reports the sensor is no longer in a critically high state.  Sensor reading: 73 degrees C.  Threshold value: 85 degrees C.        Integrated BMC - LUN#0 (Channel#0)
</code></pre>
<p><strong>Freeipmi</strong> and <strong>ipmitool</strong> are a tad misleading, as this event is the server cooling down, not heating up. <strong>ipmiutil</strong> at least says that it is now &ldquo;OK&rdquo;, but doesn&rsquo;t give the actual temperature and threshold. <strong>Selview</strong> comes out on top with an exact description of what is happening.</p>
<h2 id="conclusion--summary">Conclusion / Summary</h2>
<p>Of course <strong>Selview</strong>, being a vendor-specific tool, gives the most accurate and detailed event information. Intel has all the special, but not proprietary, information. In many cases <strong>ipmiutil</strong> had the important information, but in an abbreviated form. In general <strong>freeipmi</strong> and <strong>ipmitool</strong> had less information in critical areas, and unable to decode some of the more esoteric events entirely. In general though, it is kinda a mixed bag. If you are serious about discovering what is wrong with your server, get all the info you can get.</p>
<h2 id="problems-questions">Problems? Questions?</h2>
<p>Think I used the wrong command line arguments? Think I used the wrong version? Have another command to get the SEL output? <a href="https://github.com/solarkennedy/ipmi-sel-comparison">Fork my code on github and send me a pull reques</a>t or make a github <a href="https://github.com/solarkennedy/ipmi-sel-comparison/issues">issue</a>.</p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/intel/" rel="tag">intel</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/ipmi/" rel="tag">ipmi</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/linux/" rel="tag">linux</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/sel/" rel="tag">sel</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../configuring-bios-settings-with-puppet/" rel="bookmark">Configuring BIOS Settings With Puppet!</a>
  </h2>
  
  <time datetime="2013-02-12T03:35:01Z">
    12 February, 2013
  </time>
  
</header>

  
  <p>You know what it is like to spend time configuring the BIOS on a a server. You reboot the server, and wait for it to take its sweet time to come back up, frantically push its button, hope that you didn&rsquo;t miss your chance. Then spend some one-on-one alone time with the interface, making sure you do all the right keystrokes to get the settings you want. Sounds like a bad date.</p>
<h2 id="the-problem">The Problem</h2>
<p>If you are good then you don&rsquo;t play the waiting game:</p>
<pre><code>[root@server ~]$ ipmitool -H 192.168.0.120 -U root -P root  chassis bootparam set bootflag force_bios
Set Boot Device to force_bios
[root@server ~]$ ipmitool -H 192.168.0.120 -U root -P root chassis power reset
Chassis Power Control: Reset
</code></pre>
<p>But even still, this doesn&rsquo;t get you around having to manually choose the bios settings you want. Human interaction leads to mistakes, and more importantly, servers are <strong>NOT</strong> snowflakes:
<a href="../../uploads/bios-meme.jpg"><img src="../../uploads/bios-meme.jpg" alt="bios-meme"></a></p>
<h2 id="the-solution">The Solution</h2>
<p>Configuration Management = The Solution. I use puppet. Here is how I manage my BIOS settings with Puppet.
However, the underlying tools are very vendor specific:</p>
<ul>
<li>
<p>Intel Servers / Motherboards: <a href="http://downloadcenter.intel.com/Detail_Desc.aspx?DwnldID=16921">syscfg</a></p>
</li>
<li>
<p>Dell C-class Servers: <a href="http://poweredgec.com/files/">setupbios</a></p>
</li>
<li>
<p>HP Proliant Servers: <a href="http://h18004.www1.hp.com/products/servers/management/toolkit/stk/index.html">conrep</a></p>
</li>
</ul>
<p>I&rsquo;m not releasing my module yet due to IP junk, but here is the general overview to get you going for your particular needs:</p>
<pre><code>class bios::setting::turbo($enable=true) {
 case $enable {
   true, '1', 'enable','on', 'true': { $set_value=1 $expect_value='Enabled' }
   false, '0', 'disable', 'off', 'false': { $set_value=0 $expect_value='Disabled' }
 }
 exec { &quot;$bios::syscfg_command /bcs 'Processor Configuration' 'Intel(R) Turbo Boost Technology' $set_value&quot;:
   unless =&gt; &quot;$bios::syscfg_command /d biossettings 'Intel(R) Turbo Boost Technology' | grep 'Current Value' | grep $expect_value&quot;,
   provider =&gt; [ shell =&gt; 'sh' ]
 }
}
</code></pre>
<p>This is just a skeleton example. I have to leave the installation of your vendor-specific tool as an exercise to the reader. For example here would be the same function for a Dell server:</p>
<pre><code>case $enable {
  true, '1', 'enable','on', 'true':      { $set_value='enabled'  }
  false, '0', 'disable', 'off', 'false': { $set_value='disabled' }
}
exec { &quot;$bios::setupbios_command setting set turbo_mode $set_value&quot;:
  unless =&gt; &quot;$bios::setupbios_command setting get turbo_mode | grep $set_value&quot;,
  provider =&gt; [ shell =&gt; 'sh' ]
}
</code></pre>
<p>You are only limited by your Imagination&hellip; and whatever BIOS settings your vendor tool exports.</p>
<p>References:</p>
<ul>
<li>
<p><a href="https://wiki.xkyle.com/Configuing_BIOS_From_Linux">Personal wiki on vendor tools</a></p>
</li>
<li>
<p><a href="http://docs.puppetlabs.com/guides/parameterized_classes.html">Puppet parameterized classes</a></p>
</li>
</ul>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/bios/" rel="tag">bios</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/linux/" rel="tag">linux</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/Puppet/" rel="tag">Puppet</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../building-linux-packages-for-kernel-drivers/" rel="bookmark">Building Linux Packages For Kernel Drivers! (dkms howto)</a>
  </h2>
  
  <time datetime="2013-01-20T03:39:48Z">
    20 January, 2013
  </time>
  
</header>

  
  <h2 id="background">Background</h2>
<p>Most of the time the Linux kernel does a great job of having drivers you need, but sometimes you need to install a special driver or update an existing module.</p>
<p>Running make; make install is all fine and dandy for testing, but for production you want a repeatable process. For me, this means OS packages. (deb/rpms)</p>
<p><a href="../../uploads/morpheus-ipmi.jpg"><img src="../../uploads/33657094-300x181.jpg" alt="33657094"></a></p>
<p>So, how do you go from kernel module source code =&gt; Debian package? DKMS. DKMS will automatically build your kernel module for you, even if your kernel gets updated.</p>
<h2 id="example-ixgbe">Example: ixgbe</h2>
<p>Lets build something. In this example I&rsquo;m on an Ubuntu machine building the latest ixgbe driver.</p>
<ol>
<li>Get apt-get your stuff</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        apt-get install debhelper dkms kernel-headers
</code></pre></div><ol start="2">
<li>Untar your source code into /usr/src/$modulename-$version, like /usr/src/ixgbe-3.12.6/</li>
<li>Normally here you would run &ldquo;make&rdquo;, but instead we will make a dkms.conf file to describe how to build it. Like this:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        MAKE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;make -C src/ KERNELDIR=/lib/modules/</span><span style="color:#e6db74">${</span>kernelver<span style="color:#e6db74">}</span><span style="color:#e6db74">/build&#34;</span>
        CLEAN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;make -C src/ clean&#34;</span>
        BUILT_MODULE_NAME<span style="color:#f92672">=</span>ixgbe
        BUILT_MODULE_LOCATION<span style="color:#f92672">=</span>src/
        DEST_MODULE_LOCATION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/updates&#34;</span>
        PACKAGE_NAME<span style="color:#f92672">=</span>ixgbe-dkms
        PACKAGE_VERSION<span style="color:#f92672">=</span>3.12.6
        REMAKE_INITRD<span style="color:#f92672">=</span>no
</code></pre></div><ol start="4">
<li>Next we need to register that module with dkms:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# dkms add -m ixgbe -v 3.12.6
        Creating symlink /var/lib/dkms/ixgbe/3.12.6/source -&gt;
         /usr/src/ixgbe-3.12.6
        DKMS: add completed.
</code></pre></div><ol start="5">
<li>Next we will build the module, but using the dkms build command instead of make:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# dkms build -m ixgbe -v 3.12.6
        Kernel preparation unnecessary <span style="color:#66d9ef">for</span> this kernel. Skipping...
        Building module:
        cleaning build area....
        make KERNELRELEASE<span style="color:#f92672">=</span>3.2.0-23-generic -C src/ KERNELDIR<span style="color:#f92672">=</span>/lib/modules/3.2.0-23-generic/build....................
        cleaning build area....
        DKMS: build completed.
</code></pre></div><ol start="6">
<li>Great! Next we will make a debian src package.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# dkms mkdsc -m ixgbe -v 3.12.6 --source-only
        Using /etc/dkms/template-dkms-mkdsc
        copying template...
        modifying debian/changelog...
        modifying debian/compat...
        modifying debian/control...
        modifying debian/copyright...
        modifying debian/dirs...
        modifying debian/postinst...
        modifying debian/prerm...
        modifying debian/README.Debian...
        modifying debian/rules...
        copying legacy postinstall template...
        Copying source tree...
        Building source package... dpkg-source --before-build ixgbe-dkms-3.12.6
         debian/rules clean
         dpkg-source -b ixgbe-dkms-3.12.6
        dpkg-source: warning: no source format specified in debian/source/format, see dpkg-source<span style="color:#f92672">(</span>1<span style="color:#f92672">)</span>
         dpkg-genchanges -S &gt;../ixgbe-dkms_3.12.6_source.changes
        dpkg-genchanges: including full source code in upload
         dpkg-source --after-build ixgbe-dkms-3.12.6
        DKMS: mkdsc completed.
        Moving built files to /var/lib/dkms/ixgbe/3.12.6/dsc...
        Cleaning up temporary files...
</code></pre></div><ol start="7">
<li>Now we will build the &ldquo;binary&rdquo; debian package. In reality with &ndash;source-only this binary package just contains the source code in the module with a post install script to build the module for each kernel you are using. Its magic:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# dkms mkdeb -m ixgbe -v 3.12.6 --source-only
        Using /etc/dkms/template-dkms-mkdeb
        copying template...
        modifying debian/changelog...
        modifying debian/compat...
        modifying debian/control...
        modifying debian/copyright...
        modifying debian/dirs...
        modifying debian/postinst...
        modifying debian/prerm...
        modifying debian/README.Debian...
        modifying debian/rules...
        copying legacy postinstall template...
        Copying source tree...
        Building binary package...dpkg-buildpackage: warning: using a gain-root-command <span style="color:#66d9ef">while</span> being root
         dpkg-source --before-build ixgbe-dkms-3.12.6
         fakeroot debian/rules clean
         debian/rules build
         fakeroot debian/rules binary
         dpkg-genchanges -b &gt;../ixgbe-dkms_3.12.6_amd64.changes
        dpkg-genchanges: binary-only upload - not including any source code
         dpkg-source --after-build ixgbe-dkms-3.12.6
        DKMS: mkdeb completed.
        Moving built files to /var/lib/dkms/ixgbe/3.12.6/deb...
        Cleaning up temporary files...
</code></pre></div><ol start="8">
<li>We have a deb! Lets put it in ~</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# cp /var/lib/dkms/ixgbe/3.12.6/deb/ixgbe-dkms_3.12.6_all.deb ~
</code></pre></div><ol start="9">
<li>So we have a deb. I would like to install it, but we have to get rid of the build files so they will not conflict with the deb we just built:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# rm -r /var/lib/dkms/ixgbe/
</code></pre></div><ol start="10">
<li>Now we have a deb that you can install locally, distribute wherever, install across a cluster:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">        root@server:/usr/src/ixgbe-3.12.6# dpkg -i /root/ixgbe-dkms_3.12.6_all.deb
        Selecting previously unselected package ixgbe-dkms.
        <span style="color:#f92672">(</span>Reading database ... <span style="color:#ae81ff">56500</span> files and directories currently installed.<span style="color:#f92672">)</span>
        Unpacking ixgbe-dkms <span style="color:#f92672">(</span>from .../root/ixgbe-dkms_3.12.6_all.deb<span style="color:#f92672">)</span> ...
        Setting up ixgbe-dkms <span style="color:#f92672">(</span>3.12.6<span style="color:#f92672">)</span> ...
        Loading new ixgbe-3.12.6 DKMS files...
        First Installation: checking all kernels...
        Building only <span style="color:#66d9ef">for</span> 3.2.0-23-generic
        Building <span style="color:#66d9ef">for</span> architecture x86_64
        Building initial module <span style="color:#66d9ef">for</span> 3.2.0-23-generic
        Done.
        ixgbe:
        Running module version sanity check.
        - Original module
        - Installation
        - Installing to /lib/modules/3.2.0-23-generic/updates/dkms/
        depmod....
        DKMS: install completed.
</code></pre></div><h2 id="33657298uploads33657298jpguploads33657298jpg"><a href="../../uploads/33657298.jpg"><img src="../../uploads/33657298.jpg" alt="33657298"></a></h2>
<h2 id="reading-more">Reading More:</h2>
<ul>
<li><a href="https://wiki.xkyle.com/DKMS_Howto">https://wiki.xkyle.com/DKMS_Howto</a></li>
<li><a href="http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support">http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support</a></li>
</ul>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/debs/" rel="tag">debs</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/dkms/" rel="tag">dkms</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/kernel-modules/" rel="tag">kernel modules</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/linux/" rel="tag">linux</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/packages/" rel="tag">packages</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>

<article>
  <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="../../cool-things-to-do-after-installing-openwrt/" rel="bookmark">Cool Things to Do After Installing OpenWrt</a>
  </h2>
  
  <time datetime="2013-01-06T23:16:33Z">
    6 January, 2013
  </time>
  
</header>

  
  <p><a href="https://openwrt.org/">OpenWrt</a> is the bomb. Think all the power of a full Linux distro on your tiny home router or plug computer.</p>
<h1 id="install-an-external-root-overlay">Install an External Root Overlay</h1>
<p>What the heck does that mean? OpenWrt uses an ingenious system were the root filesystem is a super compressed squashfs, merged with a read/write jffs2 filesystem called the overlay. This maximizes your available space on the device. Instead of using part of your remaining flash for read/write, you can use a larger, external device for the overlay.</p>
<p>Lots of modern routers have USB ports. Special bonus points if you hack on an SD card mod to a device using only GPIO, like the venerable <a href="http://wiki.openwrt.org/toh/linksys/wrt54g#adding.an.mmcsd.card">WRT54G</a>.</p>
<p>Instructions: <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p>
<h1 id="security-tools">Security Tools</h1>
<p>A classic thing to do with any linux device, install every security tool there is. Apparently there are people out there who make a killing pre-installing security tools on small linux devices and selling them back to people who are ignorant of the ways of &ldquo;opkg install nmap&rdquo;</p>
<p>You are smarter than that. If you know if a security tool, there is probably a package for it for you to &ldquo;opkg install&rdquo;. If not, do the world a favor and port it and upload your makefile to the OpenWrt devel mailing list.</p>
<p>Instructions: <a href="http://wiki.openwrt.org/doc/howto/wireless.overview">http://wiki.openwrt.org/doc/howto/wireless.overview</a></p>
<h1 id="make-a-pxe-boot-server">Make a PXE Boot Server</h1>
<p>Believe it or not, a stock OpenWrt install has all the pieces necessary to be a PXE boot server, out of the box. Dnsmasq is awesome.</p>
<p>My Instructions: <a href="https://wiki.xkyle.com/OpenWrt_PXE_Server">https://wiki.xkyle.com/OpenWrt_PXE_Server
</a>Official Documentation: <a href="http://wiki.openwrt.org/doc/uci/dhcp">http://wiki.openwrt.org/doc/uci/dhcp</a></p>
<h1 id="httpswikixkylecomopenwrt_pxe_servermake-a-guest-hotspot"><a href="https://wiki.xkyle.com/OpenWrt_PXE_Server"> </a>Make a Guest Hotspot</h1>
<p>This is a cool thing to do. Once only a feature the highest end wireless routers, now possible with almost any router with OpenWrt.</p>
<p>Instructions: <a href="http://wiki.openwrt.org/doc/recipes/guest-wlan">http://wiki.openwrt.org/doc/recipes/guest-wlan</a></p>

  
  






<footer>
  
  
  <ul class="Tags">
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/openwrt/" rel="tag">openwrt</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/plug-computers/" rel="tag">plug computers</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/pxe/" rel="tag">pxe</a>
    </li>
    
    
    
    <li class="Tags-item u-background">
      <a class="Tags-link u-clickable" href="../../categories/security/" rel="tag">security</a>
    </li>
    
    
  </ul>
  
  
  
  
</footer>


</article>
<div class="Divider"></div>


<nav>
  
  <a class="Pagination u-clickable" href="../../page/6/" rel="prev">« Previous</a>
  
  
  <a class="Pagination Pagination--right u-clickable" href="../../page/4/" rel="next">Next »</a>
  
</nav>




      </div>
    </div>
  </main>
  
<footer class="Footer">
  <div class="u-wrapper">
    <div class="u-padding">
      Except where otherwise noted, content on this site is licensed under a a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"> Creative Commons Attribution 4.0 International License</a>.
    </div>
  </div>
</footer>


</body>
</html>
